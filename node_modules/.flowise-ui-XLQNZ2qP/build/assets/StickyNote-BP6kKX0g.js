import{r as g,b9 as z,bo as Za,s as ct,M as Ja,j as f,o as $o,p as Ro,_ as Z,m as gs,l as An,bp as Qt,bq as Qa,ap as el,n as jo,P as se,R as Dn,x as $n,z as Rn,H as lt,D as $t,q as jn,t as Rt,aM as yr,A as jt,v as Vo,w as _e,aE as br,b as tl,B as Ee,a0 as Un,a1 as Gn,S as qn,a9 as ms,aa as xs,T as be,am as nl,an as ol,C as sl,aU as Oe,aJ as rl,a as zo,aF as Lo,br as pt,aD as il,bs as al,bt as ys,bu as ll}from"./index-gS4G3Zvm.js";import{D as wr}from"./Dropdown-Pxw99ybs.js";import{T as Po,t as Ho,a as bs}from"./TooltipWithParser-QjR1RSOD.js";import{M as cl}from"./MultiDropdown-l8yKJNGl.js";import{C as ul,A as dl}from"./CredentialInputHandler-DLneV5-k.js";import{I as vr}from"./Input-VmClTvg5.js";import{D as fl,M as hl,E as pl}from"./ManageScrapedLinksDialog-BCRwQYUt.js";import{F as gl}from"./File-Bk6PFwL_.js";import{J as Sr,I as ml,a as xl,S as yl}from"./CredentialListDialog-whgYGMZs.js";import{C as bl}from"./CodeEditor-DHC33Fid.js";import{T as _r}from"./TabPanel-DSZe3jJJ.js";import{s as Er,u as wl}from"./DataGrid-BYvxOVVy.js";import{u as vl,a as Sl,I as hn,S as pn,b as _l,A as El,T as Cl}from"./TextField-CaTYCeBV.js";import{T as Nl}from"./ToolDialog-D6Xb6ybD.js";import{A as Il}from"./AssistantDialog-79ltHnPU.js";import{S as Cr}from"./StyledButton-BezdNUdt.js";import{M as Nr,r as Ir,d as kr,e as Tr,f as Mr,C as Ar}from"./CodeBlock-DvKXSVVU.js";import{A as kl,a as Tl,b as Ml,d as Kn}from"./ExpandMore-DO-MiTUM.js";import{F as Ot}from"./FormControl-DRZbBJsp.js";import{O as Zn}from"./OutlinedInput-D4_GfAeK.js";import{I as Ke,a as Al}from"./IconSearch-bTWMcRjI.js";import{M as gn}from"./Delete-Bz2MR18H.js";import{G as Jn}from"./Grid-D-37Cj0I.js";import{S as Dl,a as $l,b as Rl}from"./Stepper-CfgqjMEP.js";import{C as Qn}from"./CircularProgress-DZaOwk-q.js";import{I as ws}from"./IconBulb-Dp9vtm-_.js";import{I as jl}from"./nodes-D-c9NxXo.js";import{I as Vl}from"./IconCopy-DAc54BlI.js";import{I as zl}from"./IconTrash-B5rbIrMz.js";class Fo{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Fo}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}let Vn=!0,go=!1;const Ll=new Fo,Pl={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Hl(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&Pl[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function Fl(e){e.metaKey||e.altKey||e.ctrlKey||(Vn=!0)}function eo(){Vn=!1}function Ol(){this.visibilityState==="hidden"&&go&&(Vn=!0)}function Bl(e){e.addEventListener("keydown",Fl,!0),e.addEventListener("mousedown",eo,!0),e.addEventListener("pointerdown",eo,!0),e.addEventListener("touchstart",eo,!0),e.addEventListener("visibilitychange",Ol,!0)}function Wl(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return Vn||Hl(t)}function Xl(){const e=g.useCallback(s=>{s!=null&&Bl(s.ownerDocument)},[]),t=g.useRef(!1);function n(){return t.current?(go=!0,Ll.start(100,()=>{go=!1}),t.current=!1,!0):!1}function o(s){return Wl(s)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:n,ref:e}}function ve(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ve(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Yl={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const vs=e=>{let t;const n=new Set,o=(c,d)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const p=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(x=>x(t,p))}},s=()=>t,l={setState:o,getState:s,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(Yl?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(o,s,l);return l},Ul=e=>e?vs(e):vs,{useDebugValue:Gl}=z,{useSyncExternalStoreWithSelector:ql}=Za,Kl=e=>e;function Dr(e,t=Kl,n){const o=ql(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Gl(o),o}const Ss=(e,t)=>{const n=Ul(e),o=(s,r=t)=>Dr(n,s,r);return Object.assign(o,n),o},Zl=(e,t)=>e?Ss(e,t):Ss;function ye(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,s]of e)if(!Object.is(s,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var Jl={value:()=>{}};function zn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new mn(n)}function mn(e){this._=e}function Ql(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",s=n.indexOf(".");if(s>=0&&(o=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}mn.prototype=zn.prototype={constructor:mn,on:function(e,t){var n=this._,o=Ql(e+"",n),s,r=-1,i=o.length;if(arguments.length<2){for(;++r<i;)if((s=(e=o[r]).type)&&(s=ec(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<i;)if(s=(e=o[r]).type)n[s]=_s(n[s],e.name,t);else if(t==null)for(s in n)n[s]=_s(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new mn(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),o=0,s,r;o<s;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,r=o.length;s<r;++s)o[s].value.apply(t,n)}};function ec(e,t){for(var n=0,o=e.length,s;n<o;++n)if((s=e[n]).name===t)return s.value}function _s(e,t,n){for(var o=0,s=e.length;o<s;++o)if(e[o].name===t){e[o]=Jl,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var mo="http://www.w3.org/1999/xhtml";const Es={svg:"http://www.w3.org/2000/svg",xhtml:mo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ln(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Es.hasOwnProperty(t)?{space:Es[t],local:e}:e}function tc(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===mo&&t.documentElement.namespaceURI===mo?t.createElement(e):t.createElementNS(n,e)}}function nc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function $r(e){var t=Ln(e);return(t.local?nc:tc)(t)}function oc(){}function Oo(e){return e==null?oc:function(){return this.querySelector(e)}}function sc(e){typeof e!="function"&&(e=Oo(e));for(var t=this._groups,n=t.length,o=new Array(n),s=0;s<n;++s)for(var r=t[s],i=r.length,a=o[s]=new Array(i),l,u,c=0;c<i;++c)(l=r[c])&&(u=e.call(l,l.__data__,c,r))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Ie(o,this._parents)}function rc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ic(){return[]}function Rr(e){return e==null?ic:function(){return this.querySelectorAll(e)}}function ac(e){return function(){return rc(e.apply(this,arguments))}}function lc(e){typeof e=="function"?e=ac(e):e=Rr(e);for(var t=this._groups,n=t.length,o=[],s=[],r=0;r<n;++r)for(var i=t[r],a=i.length,l,u=0;u<a;++u)(l=i[u])&&(o.push(e.call(l,l.__data__,u,i)),s.push(l));return new Ie(o,s)}function jr(e){return function(){return this.matches(e)}}function Vr(e){return function(t){return t.matches(e)}}var cc=Array.prototype.find;function uc(e){return function(){return cc.call(this.children,e)}}function dc(){return this.firstElementChild}function fc(e){return this.select(e==null?dc:uc(typeof e=="function"?e:Vr(e)))}var hc=Array.prototype.filter;function pc(){return Array.from(this.children)}function gc(e){return function(){return hc.call(this.children,e)}}function mc(e){return this.selectAll(e==null?pc:gc(typeof e=="function"?e:Vr(e)))}function xc(e){typeof e!="function"&&(e=jr(e));for(var t=this._groups,n=t.length,o=new Array(n),s=0;s<n;++s)for(var r=t[s],i=r.length,a=o[s]=[],l,u=0;u<i;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&a.push(l);return new Ie(o,this._parents)}function zr(e){return new Array(e.length)}function yc(){return new Ie(this._enter||this._groups.map(zr),this._parents)}function Sn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Sn.prototype={constructor:Sn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function bc(e){return function(){return e}}function wc(e,t,n,o,s,r){for(var i=0,a,l=t.length,u=r.length;i<u;++i)(a=t[i])?(a.__data__=r[i],o[i]=a):n[i]=new Sn(e,r[i]);for(;i<l;++i)(a=t[i])&&(s[i]=a)}function vc(e,t,n,o,s,r,i){var a,l,u=new Map,c=t.length,d=r.length,h=new Array(c),p;for(a=0;a<c;++a)(l=t[a])&&(h[a]=p=i.call(l,l.__data__,a,t)+"",u.has(p)?s[a]=l:u.set(p,l));for(a=0;a<d;++a)p=i.call(e,r[a],a,r)+"",(l=u.get(p))?(o[a]=l,l.__data__=r[a],u.delete(p)):n[a]=new Sn(e,r[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(h[a])===l&&(s[a]=l)}function Sc(e){return e.__data__}function _c(e,t){if(!arguments.length)return Array.from(this,Sc);var n=t?vc:wc,o=this._parents,s=this._groups;typeof e!="function"&&(e=bc(e));for(var r=s.length,i=new Array(r),a=new Array(r),l=new Array(r),u=0;u<r;++u){var c=o[u],d=s[u],h=d.length,p=Ec(e.call(c,c&&c.__data__,u,o)),x=p.length,m=a[u]=new Array(x),S=i[u]=new Array(x),b=l[u]=new Array(h);n(c,d,m,S,b,p,t);for(var E=0,A=0,w,M;E<x;++E)if(w=m[E]){for(E>=A&&(A=E+1);!(M=S[A])&&++A<x;);w._next=M||null}}return i=new Ie(i,o),i._enter=a,i._exit=l,i}function Ec(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Cc(){return new Ie(this._exit||this._groups.map(zr),this._parents)}function Nc(e,t,n){var o=this.enter(),s=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?r.remove():n(r),o&&s?o.merge(s).order():s}function Ic(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,s=n.length,r=o.length,i=Math.min(s,r),a=new Array(s),l=0;l<i;++l)for(var u=n[l],c=o[l],d=u.length,h=a[l]=new Array(d),p,x=0;x<d;++x)(p=u[x]||c[x])&&(h[x]=p);for(;l<s;++l)a[l]=n[l];return new Ie(a,this._parents)}function kc(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],s=o.length-1,r=o[s],i;--s>=0;)(i=o[s])&&(r&&i.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(i,r),r=i);return this}function Tc(e){e||(e=Mc);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,o=n.length,s=new Array(o),r=0;r<o;++r){for(var i=n[r],a=i.length,l=s[r]=new Array(a),u,c=0;c<a;++c)(u=i[c])&&(l[c]=u);l.sort(t)}return new Ie(s,this._parents).order()}function Mc(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ac(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Dc(){return Array.from(this)}function $c(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],s=0,r=o.length;s<r;++s){var i=o[s];if(i)return i}return null}function Rc(){let e=0;for(const t of this)++e;return e}function jc(){return!this.node()}function Vc(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var s=t[n],r=0,i=s.length,a;r<i;++r)(a=s[r])&&e.call(a,a.__data__,r,s);return this}function zc(e){return function(){this.removeAttribute(e)}}function Lc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Pc(e,t){return function(){this.setAttribute(e,t)}}function Hc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Fc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Oc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Bc(e,t){var n=Ln(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Lc:zc:typeof t=="function"?n.local?Oc:Fc:n.local?Hc:Pc)(n,t))}function Lr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Wc(e){return function(){this.style.removeProperty(e)}}function Xc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Yc(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Uc(e,t,n){return arguments.length>1?this.each((t==null?Wc:typeof t=="function"?Yc:Xc)(e,t,n??"")):Tt(this.node(),e)}function Tt(e,t){return e.style.getPropertyValue(t)||Lr(e).getComputedStyle(e,null).getPropertyValue(t)}function Gc(e){return function(){delete this[e]}}function qc(e,t){return function(){this[e]=t}}function Kc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Zc(e,t){return arguments.length>1?this.each((t==null?Gc:typeof t=="function"?Kc:qc)(e,t)):this.node()[e]}function Pr(e){return e.trim().split(/^|\s+/)}function Bo(e){return e.classList||new Hr(e)}function Hr(e){this._node=e,this._names=Pr(e.getAttribute("class")||"")}Hr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Fr(e,t){for(var n=Bo(e),o=-1,s=t.length;++o<s;)n.add(t[o])}function Or(e,t){for(var n=Bo(e),o=-1,s=t.length;++o<s;)n.remove(t[o])}function Jc(e){return function(){Fr(this,e)}}function Qc(e){return function(){Or(this,e)}}function eu(e,t){return function(){(t.apply(this,arguments)?Fr:Or)(this,e)}}function tu(e,t){var n=Pr(e+"");if(arguments.length<2){for(var o=Bo(this.node()),s=-1,r=n.length;++s<r;)if(!o.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?eu:t?Jc:Qc)(n,t))}function nu(){this.textContent=""}function ou(e){return function(){this.textContent=e}}function su(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ru(e){return arguments.length?this.each(e==null?nu:(typeof e=="function"?su:ou)(e)):this.node().textContent}function iu(){this.innerHTML=""}function au(e){return function(){this.innerHTML=e}}function lu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function cu(e){return arguments.length?this.each(e==null?iu:(typeof e=="function"?lu:au)(e)):this.node().innerHTML}function uu(){this.nextSibling&&this.parentNode.appendChild(this)}function du(){return this.each(uu)}function fu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hu(){return this.each(fu)}function pu(e){var t=typeof e=="function"?e:$r(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function gu(){return null}function mu(e,t){var n=typeof e=="function"?e:$r(e),o=t==null?gu:typeof t=="function"?t:Oo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function xu(){var e=this.parentNode;e&&e.removeChild(this)}function yu(){return this.each(xu)}function bu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vu(e){return this.select(e?wu:bu)}function Su(e){return arguments.length?this.property("__data__",e):this.node().__data__}function _u(e){return function(t){e.call(this,t,this.__data__)}}function Eu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Cu(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,s=t.length,r;n<s;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function Nu(e,t,n){return function(){var o=this.__on,s,r=_u(t);if(o){for(var i=0,a=o.length;i<a;++i)if((s=o[i]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=r,s.options=n),s.value=t;return}}this.addEventListener(e.type,r,n),s={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(s):this.__on=[s]}}function Iu(e,t,n){var o=Eu(e+""),s,r=o.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(s=0,c=a[l];s<r;++s)if((i=o[s]).type===c.type&&i.name===c.name)return c.value}return}for(a=t?Nu:Cu,s=0;s<r;++s)this.each(a(o[s],t,n));return this}function Br(e,t,n){var o=Lr(e),s=o.CustomEvent;typeof s=="function"?s=new s(t,n):(s=o.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function ku(e,t){return function(){return Br(this,e,t)}}function Tu(e,t){return function(){return Br(this,e,t.apply(this,arguments))}}function Mu(e,t){return this.each((typeof t=="function"?Tu:ku)(e,t))}function*Au(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],s=0,r=o.length,i;s<r;++s)(i=o[s])&&(yield i)}var Wr=[null];function Ie(e,t){this._groups=e,this._parents=t}function en(){return new Ie([[document.documentElement]],Wr)}function Du(){return this}Ie.prototype=en.prototype={constructor:Ie,select:sc,selectAll:lc,selectChild:fc,selectChildren:mc,filter:xc,data:_c,enter:yc,exit:Cc,join:Nc,merge:Ic,selection:Du,order:kc,sort:Tc,call:Ac,nodes:Dc,node:$c,size:Rc,empty:jc,each:Vc,attr:Bc,style:Uc,property:Zc,classed:tu,text:ru,html:cu,raise:du,lower:hu,append:pu,insert:mu,remove:yu,clone:vu,datum:Su,on:Iu,dispatch:Mu,[Symbol.iterator]:Au};function $e(e){return typeof e=="string"?new Ie([[document.querySelector(e)]],[document.documentElement]):new Ie([[e]],Wr)}function $u(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Be(e,t){if(e=$u(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const Ru={passive:!1},Yt={capture:!0,passive:!1};function to(e){e.stopImmediatePropagation()}function Ct(e){e.preventDefault(),e.stopImmediatePropagation()}function Xr(e){var t=e.document.documentElement,n=$e(e).on("dragstart.drag",Ct,Yt);"onselectstart"in t?n.on("selectstart.drag",Ct,Yt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Yr(e,t){var n=e.document.documentElement,o=$e(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ct,Yt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const on=e=>()=>e;function xo(e,{sourceEvent:t,subject:n,target:o,identifier:s,active:r,x:i,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}xo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ju(e){return!e.ctrlKey&&!e.button}function Vu(){return this.parentNode}function zu(e,t){return t??{x:e.x,y:e.y}}function Lu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pu(){var e=ju,t=Vu,n=zu,o=Lu,s={},r=zn("start","drag","end"),i=0,a,l,u,c,d=0;function h(w){w.on("mousedown.drag",p).filter(o).on("touchstart.drag",S).on("touchmove.drag",b,Ru).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,M){if(!(c||!e.call(this,w,M))){var k=A(this,t.call(this,w,M),w,M,"mouse");k&&($e(w.view).on("mousemove.drag",x,Yt).on("mouseup.drag",m,Yt),Xr(w.view),to(w),u=!1,a=w.clientX,l=w.clientY,k("start",w))}}function x(w){if(Ct(w),!u){var M=w.clientX-a,k=w.clientY-l;u=M*M+k*k>d}s.mouse("drag",w)}function m(w){$e(w.view).on("mousemove.drag mouseup.drag",null),Yr(w.view,u),Ct(w),s.mouse("end",w)}function S(w,M){if(e.call(this,w,M)){var k=w.changedTouches,j=t.call(this,w,M),V=k.length,$,T;for($=0;$<V;++$)(T=A(this,j,w,M,k[$].identifier,k[$]))&&(to(w),T("start",w,k[$]))}}function b(w){var M=w.changedTouches,k=M.length,j,V;for(j=0;j<k;++j)(V=s[M[j].identifier])&&(Ct(w),V("drag",w,M[j]))}function E(w){var M=w.changedTouches,k=M.length,j,V;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),j=0;j<k;++j)(V=s[M[j].identifier])&&(to(w),V("end",w,M[j]))}function A(w,M,k,j,V,$){var T=r.copy(),R=Be($||k,M),F,I,y;if((y=n.call(w,new xo("beforestart",{sourceEvent:k,target:h,identifier:V,active:i,x:R[0],y:R[1],dx:0,dy:0,dispatch:T}),j))!=null)return F=y.x-R[0]||0,I=y.y-R[1]||0,function _(v,D,P){var N=R,H;switch(v){case"start":s[V]=_,H=i++;break;case"end":delete s[V],--i;case"drag":R=Be(P||D,M),H=i;break}T.call(v,w,new xo(v,{sourceEvent:D,subject:y,target:h,identifier:V,active:H,x:R[0]+F,y:R[1]+I,dx:R[0]-N[0],dy:R[1]-N[1],dispatch:T}),j)}}return h.filter=function(w){return arguments.length?(e=typeof w=="function"?w:on(!!w),h):e},h.container=function(w){return arguments.length?(t=typeof w=="function"?w:on(w),h):t},h.subject=function(w){return arguments.length?(n=typeof w=="function"?w:on(w),h):n},h.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:on(!!w),h):o},h.on=function(){var w=r.on.apply(r,arguments);return w===r?h:w},h.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,h):Math.sqrt(d)},h}function Wo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ur(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function tn(){}var Ut=.7,_n=1/Ut,Nt="\\s*([+-]?\\d+)\\s*",Gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",We="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hu=/^#([0-9a-f]{3,8})$/,Fu=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),Ou=new RegExp(`^rgb\\(${We},${We},${We}\\)$`),Bu=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${Gt}\\)$`),Wu=new RegExp(`^rgba\\(${We},${We},${We},${Gt}\\)$`),Xu=new RegExp(`^hsl\\(${Gt},${We},${We}\\)$`),Yu=new RegExp(`^hsla\\(${Gt},${We},${We},${Gt}\\)$`),Cs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wo(tn,qt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ns,formatHex:Ns,formatHex8:Uu,formatHsl:Gu,formatRgb:Is,toString:Is});function Ns(){return this.rgb().formatHex()}function Uu(){return this.rgb().formatHex8()}function Gu(){return Gr(this).formatHsl()}function Is(){return this.rgb().formatRgb()}function qt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Hu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ks(t):n===3?new Ce(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?sn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?sn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Fu.exec(e))?new Ce(t[1],t[2],t[3],1):(t=Ou.exec(e))?new Ce(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Bu.exec(e))?sn(t[1],t[2],t[3],t[4]):(t=Wu.exec(e))?sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Xu.exec(e))?As(t[1],t[2]/100,t[3]/100,1):(t=Yu.exec(e))?As(t[1],t[2]/100,t[3]/100,t[4]):Cs.hasOwnProperty(e)?ks(Cs[e]):e==="transparent"?new Ce(NaN,NaN,NaN,0):null}function ks(e){return new Ce(e>>16&255,e>>8&255,e&255,1)}function sn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Ce(e,t,n,o)}function qu(e){return e instanceof tn||(e=qt(e)),e?(e=e.rgb(),new Ce(e.r,e.g,e.b,e.opacity)):new Ce}function yo(e,t,n,o){return arguments.length===1?qu(e):new Ce(e,t,n,o??1)}function Ce(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Wo(Ce,yo,Ur(tn,{brighter(e){return e=e==null?_n:Math.pow(_n,e),new Ce(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ut:Math.pow(Ut,e),new Ce(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ce(xt(this.r),xt(this.g),xt(this.b),En(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ts,formatHex:Ts,formatHex8:Ku,formatRgb:Ms,toString:Ms}));function Ts(){return`#${gt(this.r)}${gt(this.g)}${gt(this.b)}`}function Ku(){return`#${gt(this.r)}${gt(this.g)}${gt(this.b)}${gt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ms(){const e=En(this.opacity);return`${e===1?"rgb(":"rgba("}${xt(this.r)}, ${xt(this.g)}, ${xt(this.b)}${e===1?")":`, ${e})`}`}function En(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function gt(e){return e=xt(e),(e<16?"0":"")+e.toString(16)}function As(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Re(e,t,n,o)}function Gr(e){if(e instanceof Re)return new Re(e.h,e.s,e.l,e.opacity);if(e instanceof tn||(e=qt(e)),!e)return new Re;if(e instanceof Re)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,s=Math.min(t,n,o),r=Math.max(t,n,o),i=NaN,a=r-s,l=(r+s)/2;return a?(t===r?i=(n-o)/a+(n<o)*6:n===r?i=(o-t)/a+2:i=(t-n)/a+4,a/=l<.5?r+s:2-r-s,i*=60):a=l>0&&l<1?0:i,new Re(i,a,l,e.opacity)}function Zu(e,t,n,o){return arguments.length===1?Gr(e):new Re(e,t,n,o??1)}function Re(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Wo(Re,Zu,Ur(tn,{brighter(e){return e=e==null?_n:Math.pow(_n,e),new Re(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ut:Math.pow(Ut,e),new Re(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,s=2*n-o;return new Ce(no(e>=240?e-240:e+120,s,o),no(e,s,o),no(e<120?e+240:e-120,s,o),this.opacity)},clamp(){return new Re(Ds(this.h),rn(this.s),rn(this.l),En(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=En(this.opacity);return`${e===1?"hsl(":"hsla("}${Ds(this.h)}, ${rn(this.s)*100}%, ${rn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ds(e){return e=(e||0)%360,e<0?e+360:e}function rn(e){return Math.max(0,Math.min(1,e||0))}function no(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const qr=e=>()=>e;function Ju(e,t){return function(n){return e+n*t}}function Qu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function ed(e){return(e=+e)==1?Kr:function(t,n){return n-t?Qu(t,n,e):qr(isNaN(t)?n:t)}}function Kr(e,t){var n=t-e;return n?Ju(e,n):qr(isNaN(e)?t:e)}const $s=function e(t){var n=ed(t);function o(s,r){var i=n((s=yo(s)).r,(r=yo(r)).r),a=n(s.g,r.g),l=n(s.b,r.b),u=Kr(s.opacity,r.opacity);return function(c){return s.r=i(c),s.g=a(c),s.b=l(c),s.opacity=u(c),s+""}}return o.gamma=e,o}(1);function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var bo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oo=new RegExp(bo.source,"g");function td(e){return function(){return e}}function nd(e){return function(t){return e(t)+""}}function od(e,t){var n=bo.lastIndex=oo.lastIndex=0,o,s,r,i=-1,a=[],l=[];for(e=e+"",t=t+"";(o=bo.exec(e))&&(s=oo.exec(t));)(r=s.index)>n&&(r=t.slice(n,r),a[i]?a[i]+=r:a[++i]=r),(o=o[0])===(s=s[0])?a[i]?a[i]+=s:a[++i]=s:(a[++i]=null,l.push({i,x:ot(o,s)})),n=oo.lastIndex;return n<t.length&&(r=t.slice(n),a[i]?a[i]+=r:a[++i]=r),a.length<2?l[0]?nd(l[0].x):td(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}var Rs=180/Math.PI,wo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zr(e,t,n,o,s,r){var i,a,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:s,translateY:r,rotate:Math.atan2(t,e)*Rs,skewX:Math.atan(l)*Rs,scaleX:i,scaleY:a}}var an;function sd(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?wo:Zr(t.a,t.b,t.c,t.d,t.e,t.f)}function rd(e){return e==null||(an||(an=document.createElementNS("http://www.w3.org/2000/svg","g")),an.setAttribute("transform",e),!(e=an.transform.baseVal.consolidate()))?wo:(e=e.matrix,Zr(e.a,e.b,e.c,e.d,e.e,e.f))}function Jr(e,t,n,o){function s(u){return u.length?u.pop()+" ":""}function r(u,c,d,h,p,x){if(u!==d||c!==h){var m=p.push("translate(",null,t,null,n);x.push({i:m-4,x:ot(u,d)},{i:m-2,x:ot(c,h)})}else(d||h)&&p.push("translate("+d+t+h+n)}function i(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(s(d)+"rotate(",null,o)-2,x:ot(u,c)})):c&&d.push(s(d)+"rotate("+c+o)}function a(u,c,d,h){u!==c?h.push({i:d.push(s(d)+"skewX(",null,o)-2,x:ot(u,c)}):c&&d.push(s(d)+"skewX("+c+o)}function l(u,c,d,h,p,x){if(u!==d||c!==h){var m=p.push(s(p)+"scale(",null,",",null,")");x.push({i:m-4,x:ot(u,d)},{i:m-2,x:ot(c,h)})}else(d!==1||h!==1)&&p.push(s(p)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,d,h),i(u.rotate,c.rotate,d,h),a(u.skewX,c.skewX,d,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(p){for(var x=-1,m=h.length,S;++x<m;)d[(S=h[x]).i]=S.x(p);return d.join("")}}}var id=Jr(sd,"px, ","px)","deg)"),ad=Jr(rd,", ",")",")"),ld=1e-12;function js(e){return((e=Math.exp(e))+1/e)/2}function cd(e){return((e=Math.exp(e))-1/e)/2}function ud(e){return((e=Math.exp(2*e))-1)/(e+1)}const dd=function e(t,n,o){function s(r,i){var a=r[0],l=r[1],u=r[2],c=i[0],d=i[1],h=i[2],p=c-a,x=d-l,m=p*p+x*x,S,b;if(m<ld)b=Math.log(h/u)/t,S=function(j){return[a+j*p,l+j*x,u*Math.exp(t*j*b)]};else{var E=Math.sqrt(m),A=(h*h-u*u+o*m)/(2*u*n*E),w=(h*h-u*u-o*m)/(2*h*n*E),M=Math.log(Math.sqrt(A*A+1)-A),k=Math.log(Math.sqrt(w*w+1)-w);b=(k-M)/t,S=function(j){var V=j*b,$=js(M),T=u/(n*E)*($*ud(t*V+M)-cd(M));return[a+T*p,l+T*x,u*$/js(t*V+M)]}}return S.duration=b*1e3*t/Math.SQRT2,S}return s.rho=function(r){var i=Math.max(.001,+r),a=i*i,l=a*a;return e(i,a,l)},s}(Math.SQRT2,2,4);var Mt=0,Bt=0,Vt=0,Qr=1e3,Cn,Wt,Nn=0,yt=0,Pn=0,Kt=typeof performance=="object"&&performance.now?performance:Date,ei=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Xo(){return yt||(ei(fd),yt=Kt.now()+Pn)}function fd(){yt=0}function In(){this._call=this._time=this._next=null}In.prototype=ti.prototype={constructor:In,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Xo():+n)+(t==null?0:+t),!this._next&&Wt!==this&&(Wt?Wt._next=this:Cn=this,Wt=this),this._call=e,this._time=n,vo()},stop:function(){this._call&&(this._call=null,this._time=1/0,vo())}};function ti(e,t,n){var o=new In;return o.restart(e,t,n),o}function hd(){Xo(),++Mt;for(var e=Cn,t;e;)(t=yt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mt}function Vs(){yt=(Nn=Kt.now())+Pn,Mt=Bt=0;try{hd()}finally{Mt=0,gd(),yt=0}}function pd(){var e=Kt.now(),t=e-Nn;t>Qr&&(Pn-=t,Nn=e)}function gd(){for(var e,t=Cn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Cn=n);Wt=e,vo(o)}function vo(e){if(!Mt){Bt&&(Bt=clearTimeout(Bt));var t=e-yt;t>24?(e<1/0&&(Bt=setTimeout(Vs,e-Kt.now()-Pn)),Vt&&(Vt=clearInterval(Vt))):(Vt||(Nn=Kt.now(),Vt=setInterval(pd,Qr)),Mt=1,ei(Vs))}}function zs(e,t,n){var o=new In;return t=t==null?0:+t,o.restart(s=>{o.stop(),e(s+t)},t,n),o}var md=zn("start","end","cancel","interrupt"),xd=[],ni=0,Ls=1,So=2,xn=3,Ps=4,_o=5,yn=6;function Hn(e,t,n,o,s,r){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;yd(e,n,{name:t,index:o,group:s,on:md,tween:xd,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:ni})}function Yo(e,t){var n=ze(e,t);if(n.state>ni)throw new Error("too late; already scheduled");return n}function Xe(e,t){var n=ze(e,t);if(n.state>xn)throw new Error("too late; already running");return n}function ze(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function yd(e,t,n){var o=e.__transition,s;o[t]=n,n.timer=ti(r,0,n.time);function r(u){n.state=Ls,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var c,d,h,p;if(n.state!==Ls)return l();for(c in o)if(p=o[c],p.name===n.name){if(p.state===xn)return zs(i);p.state===Ps?(p.state=yn,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=yn,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(zs(function(){n.state===xn&&(n.state=Ps,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=So,n.on.call("start",e,e.__data__,n.index,n.group),n.state===So){for(n.state=xn,s=new Array(h=n.tween.length),c=0,d=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(s[++d]=p);s.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=_o,1),d=-1,h=s.length;++d<h;)s[d].call(e,c);n.state===_o&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=yn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function bn(e,t){var n=e.__transition,o,s,r=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){r=!1;continue}s=o.state>So&&o.state<_o,o.state=yn,o.timer.stop(),o.on.call(s?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}r&&delete e.__transition}}function bd(e){return this.each(function(){bn(this,e)})}function wd(e,t){var n,o;return function(){var s=Xe(this,e),r=s.tween;if(r!==n){o=n=r;for(var i=0,a=o.length;i<a;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}s.tween=o}}function vd(e,t,n){var o,s;if(typeof n!="function")throw new Error;return function(){var r=Xe(this,e),i=r.tween;if(i!==o){s=(o=i).slice();for(var a={name:t,value:n},l=0,u=s.length;l<u;++l)if(s[l].name===t){s[l]=a;break}l===u&&s.push(a)}r.tween=s}}function Sd(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=ze(this.node(),n).tween,s=0,r=o.length,i;s<r;++s)if((i=o[s]).name===e)return i.value;return null}return this.each((t==null?wd:vd)(n,e,t))}function Uo(e,t,n){var o=e._id;return e.each(function(){var s=Xe(this,o);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return ze(s,o).value[t]}}function oi(e,t){var n;return(typeof t=="number"?ot:t instanceof qt?$s:(n=qt(t))?(t=n,$s):od)(e,t)}function _d(e){return function(){this.removeAttribute(e)}}function Ed(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cd(e,t,n){var o,s=n+"",r;return function(){var i=this.getAttribute(e);return i===s?null:i===o?r:r=t(o=i,n)}}function Nd(e,t,n){var o,s=n+"",r;return function(){var i=this.getAttributeNS(e.space,e.local);return i===s?null:i===o?r:r=t(o=i,n)}}function Id(e,t,n){var o,s,r;return function(){var i,a=n(this),l;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=a+"",i===l?null:i===o&&l===s?r:(s=l,r=t(o=i,a)))}}function kd(e,t,n){var o,s,r;return function(){var i,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=a+"",i===l?null:i===o&&l===s?r:(s=l,r=t(o=i,a)))}}function Td(e,t){var n=Ln(e),o=n==="transform"?ad:oi;return this.attrTween(e,typeof t=="function"?(n.local?kd:Id)(n,o,Uo(this,"attr."+e,t)):t==null?(n.local?Ed:_d)(n):(n.local?Nd:Cd)(n,o,t))}function Md(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ad(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Dd(e,t){var n,o;function s(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&Ad(e,r)),n}return s._value=t,s}function $d(e,t){var n,o;function s(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&Md(e,r)),n}return s._value=t,s}function Rd(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Ln(e);return this.tween(n,(o.local?Dd:$d)(o,t))}function jd(e,t){return function(){Yo(this,e).delay=+t.apply(this,arguments)}}function Vd(e,t){return t=+t,function(){Yo(this,e).delay=t}}function zd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jd:Vd)(t,e)):ze(this.node(),t).delay}function Ld(e,t){return function(){Xe(this,e).duration=+t.apply(this,arguments)}}function Pd(e,t){return t=+t,function(){Xe(this,e).duration=t}}function Hd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ld:Pd)(t,e)):ze(this.node(),t).duration}function Fd(e,t){if(typeof t!="function")throw new Error;return function(){Xe(this,e).ease=t}}function Od(e){var t=this._id;return arguments.length?this.each(Fd(t,e)):ze(this.node(),t).ease}function Bd(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Xe(this,e).ease=n}}function Wd(e){if(typeof e!="function")throw new Error;return this.each(Bd(this._id,e))}function Xd(e){typeof e!="function"&&(e=jr(e));for(var t=this._groups,n=t.length,o=new Array(n),s=0;s<n;++s)for(var r=t[s],i=r.length,a=o[s]=[],l,u=0;u<i;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&a.push(l);return new Je(o,this._parents,this._name,this._id)}function Yd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,s=n.length,r=Math.min(o,s),i=new Array(o),a=0;a<r;++a)for(var l=t[a],u=n[a],c=l.length,d=i[a]=new Array(c),h,p=0;p<c;++p)(h=l[p]||u[p])&&(d[p]=h);for(;a<o;++a)i[a]=t[a];return new Je(i,this._parents,this._name,this._id)}function Ud(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Gd(e,t,n){var o,s,r=Ud(t)?Yo:Xe;return function(){var i=r(this,e),a=i.on;a!==o&&(s=(o=a).copy()).on(t,n),i.on=s}}function qd(e,t){var n=this._id;return arguments.length<2?ze(this.node(),n).on.on(e):this.each(Gd(n,e,t))}function Kd(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Zd(){return this.on("end.remove",Kd(this._id))}function Jd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Oo(e));for(var o=this._groups,s=o.length,r=new Array(s),i=0;i<s;++i)for(var a=o[i],l=a.length,u=r[i]=new Array(l),c,d,h=0;h<l;++h)(c=a[h])&&(d=e.call(c,c.__data__,h,a))&&("__data__"in c&&(d.__data__=c.__data__),u[h]=d,Hn(u[h],t,n,h,u,ze(c,n)));return new Je(r,this._parents,t,n)}function Qd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Rr(e));for(var o=this._groups,s=o.length,r=[],i=[],a=0;a<s;++a)for(var l=o[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var h=e.call(c,c.__data__,d,l),p,x=ze(c,n),m=0,S=h.length;m<S;++m)(p=h[m])&&Hn(p,t,n,m,h,x);r.push(h),i.push(c)}return new Je(r,i,t,n)}var ef=en.prototype.constructor;function tf(){return new ef(this._groups,this._parents)}function nf(e,t){var n,o,s;return function(){var r=Tt(this,e),i=(this.style.removeProperty(e),Tt(this,e));return r===i?null:r===n&&i===o?s:s=t(n=r,o=i)}}function si(e){return function(){this.style.removeProperty(e)}}function of(e,t,n){var o,s=n+"",r;return function(){var i=Tt(this,e);return i===s?null:i===o?r:r=t(o=i,n)}}function sf(e,t,n){var o,s,r;return function(){var i=Tt(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Tt(this,e))),i===l?null:i===o&&l===s?r:(s=l,r=t(o=i,a))}}function rf(e,t){var n,o,s,r="style."+t,i="end."+r,a;return function(){var l=Xe(this,e),u=l.on,c=l.value[r]==null?a||(a=si(t)):void 0;(u!==n||s!==c)&&(o=(n=u).copy()).on(i,s=c),l.on=o}}function af(e,t,n){var o=(e+="")=="transform"?id:oi;return t==null?this.styleTween(e,nf(e,o)).on("end.style."+e,si(e)):typeof t=="function"?this.styleTween(e,sf(e,o,Uo(this,"style."+e,t))).each(rf(this._id,e)):this.styleTween(e,of(e,o,t),n).on("end.style."+e,null)}function lf(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function cf(e,t,n){var o,s;function r(){var i=t.apply(this,arguments);return i!==s&&(o=(s=i)&&lf(e,i,n)),o}return r._value=t,r}function uf(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,cf(e,t,n??""))}function df(e){return function(){this.textContent=e}}function ff(e){return function(){var t=e(this);this.textContent=t??""}}function hf(e){return this.tween("text",typeof e=="function"?ff(Uo(this,"text",e)):df(e==null?"":e+""))}function pf(e){return function(t){this.textContent=e.call(this,t)}}function gf(e){var t,n;function o(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&pf(s)),t}return o._value=e,o}function mf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,gf(e))}function xf(){for(var e=this._name,t=this._id,n=ri(),o=this._groups,s=o.length,r=0;r<s;++r)for(var i=o[r],a=i.length,l,u=0;u<a;++u)if(l=i[u]){var c=ze(l,t);Hn(l,e,n,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Je(o,this._parents,e,n)}function yf(){var e,t,n=this,o=n._id,s=n.size();return new Promise(function(r,i){var a={value:i},l={value:function(){--s===0&&r()}};n.each(function(){var u=Xe(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),s===0&&r()})}var bf=0;function Je(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function ri(){return++bf}var qe=en.prototype;Je.prototype={constructor:Je,select:Jd,selectAll:Qd,selectChild:qe.selectChild,selectChildren:qe.selectChildren,filter:Xd,merge:Yd,selection:tf,transition:xf,call:qe.call,nodes:qe.nodes,node:qe.node,size:qe.size,empty:qe.empty,each:qe.each,on:qd,attr:Td,attrTween:Rd,style:af,styleTween:uf,text:hf,textTween:mf,remove:Zd,tween:Sd,delay:zd,duration:Hd,ease:Od,easeVarying:Wd,end:yf,[Symbol.iterator]:qe[Symbol.iterator]};function wf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var vf={time:null,delay:0,duration:250,ease:wf};function Sf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function _f(e){var t,n;e instanceof Je?(t=e._id,e=e._name):(t=ri(),(n=vf).time=Xo(),e=e==null?null:e+"");for(var o=this._groups,s=o.length,r=0;r<s;++r)for(var i=o[r],a=i.length,l,u=0;u<a;++u)(l=i[u])&&Hn(l,e,t,u,i,n||Sf(l,t));return new Je(o,this._parents,e,t)}en.prototype.interrupt=bd;en.prototype.transition=_f;const ln=e=>()=>e;function Ef(e,{sourceEvent:t,target:n,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function Ze(e,t,n){this.k=e,this.x=t,this.y=n}Ze.prototype={constructor:Ze,scale:function(e){return e===1?this:new Ze(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ze(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var it=new Ze(1,0,0);Ze.prototype;function so(e){e.stopImmediatePropagation()}function zt(e){e.preventDefault(),e.stopImmediatePropagation()}function Cf(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Nf(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Hs(){return this.__zoom||it}function If(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function kf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tf(e,t,n){var o=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i))}function Mf(){var e=Cf,t=Nf,n=Tf,o=If,s=kf,r=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,l=dd,u=zn("start","zoom","end"),c,d,h,p=500,x=150,m=0,S=10;function b(y){y.property("__zoom",Hs).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",T).filter(s).on("touchstart.zoom",R).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(y,_,v,D){var P=y.selection?y.selection():y;P.property("__zoom",Hs),y!==P?M(y,_,v,D):P.interrupt().each(function(){k(this,arguments).event(D).start().zoom(null,typeof _=="function"?_.apply(this,arguments):_).end()})},b.scaleBy=function(y,_,v,D){b.scaleTo(y,function(){var P=this.__zoom.k,N=typeof _=="function"?_.apply(this,arguments):_;return P*N},v,D)},b.scaleTo=function(y,_,v,D){b.transform(y,function(){var P=t.apply(this,arguments),N=this.__zoom,H=v==null?w(P):typeof v=="function"?v.apply(this,arguments):v,C=N.invert(H),L=typeof _=="function"?_.apply(this,arguments):_;return n(A(E(N,L),H,C),P,i)},v,D)},b.translateBy=function(y,_,v,D){b.transform(y,function(){return n(this.__zoom.translate(typeof _=="function"?_.apply(this,arguments):_,typeof v=="function"?v.apply(this,arguments):v),t.apply(this,arguments),i)},null,D)},b.translateTo=function(y,_,v,D,P){b.transform(y,function(){var N=t.apply(this,arguments),H=this.__zoom,C=D==null?w(N):typeof D=="function"?D.apply(this,arguments):D;return n(it.translate(C[0],C[1]).scale(H.k).translate(typeof _=="function"?-_.apply(this,arguments):-_,typeof v=="function"?-v.apply(this,arguments):-v),N,i)},D,P)};function E(y,_){return _=Math.max(r[0],Math.min(r[1],_)),_===y.k?y:new Ze(_,y.x,y.y)}function A(y,_,v){var D=_[0]-v[0]*y.k,P=_[1]-v[1]*y.k;return D===y.x&&P===y.y?y:new Ze(y.k,D,P)}function w(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function M(y,_,v,D){y.on("start.zoom",function(){k(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(D).end()}).tween("zoom",function(){var P=this,N=arguments,H=k(P,N).event(D),C=t.apply(P,N),L=v==null?w(C):typeof v=="function"?v.apply(P,N):v,B=Math.max(C[1][0]-C[0][0],C[1][1]-C[0][1]),W=P.__zoom,K=typeof _=="function"?_.apply(P,N):_,ne=l(W.invert(L).concat(B/W.k),K.invert(L).concat(B/K.k));return function(G){if(G===1)G=K;else{var Y=ne(G),J=B/Y[2];G=new Ze(J,L[0]-Y[0]*J,L[1]-Y[1]*J)}H.zoom(null,G)}})}function k(y,_,v){return!v&&y.__zooming||new j(y,_)}function j(y,_){this.that=y,this.args=_,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,_),this.taps=0}j.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,_){return this.mouse&&y!=="mouse"&&(this.mouse[1]=_.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=_.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=_.invert(this.touch1[0])),this.that.__zoom=_,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var _=$e(this.that).datum();u.call(y,this.that,new Ef(y,{sourceEvent:this.sourceEvent,target:b,type:y,transform:this.that.__zoom,dispatch:u}),_)}};function V(y,..._){if(!e.apply(this,arguments))return;var v=k(this,_).event(y),D=this.__zoom,P=Math.max(r[0],Math.min(r[1],D.k*Math.pow(2,o.apply(this,arguments)))),N=Be(y);if(v.wheel)(v.mouse[0][0]!==N[0]||v.mouse[0][1]!==N[1])&&(v.mouse[1]=D.invert(v.mouse[0]=N)),clearTimeout(v.wheel);else{if(D.k===P)return;v.mouse=[N,D.invert(N)],bn(this),v.start()}zt(y),v.wheel=setTimeout(H,x),v.zoom("mouse",n(A(E(D,P),v.mouse[0],v.mouse[1]),v.extent,i));function H(){v.wheel=null,v.end()}}function $(y,..._){if(h||!e.apply(this,arguments))return;var v=y.currentTarget,D=k(this,_,!0).event(y),P=$e(y.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",B,!0),N=Be(y,v),H=y.clientX,C=y.clientY;Xr(y.view),so(y),D.mouse=[N,this.__zoom.invert(N)],bn(this),D.start();function L(W){if(zt(W),!D.moved){var K=W.clientX-H,ne=W.clientY-C;D.moved=K*K+ne*ne>m}D.event(W).zoom("mouse",n(A(D.that.__zoom,D.mouse[0]=Be(W,v),D.mouse[1]),D.extent,i))}function B(W){P.on("mousemove.zoom mouseup.zoom",null),Yr(W.view,D.moved),zt(W),D.event(W).end()}}function T(y,..._){if(e.apply(this,arguments)){var v=this.__zoom,D=Be(y.changedTouches?y.changedTouches[0]:y,this),P=v.invert(D),N=v.k*(y.shiftKey?.5:2),H=n(A(E(v,N),D,P),t.apply(this,_),i);zt(y),a>0?$e(this).transition().duration(a).call(M,H,D,y):$e(this).call(b.transform,H,D,y)}}function R(y,..._){if(e.apply(this,arguments)){var v=y.touches,D=v.length,P=k(this,_,y.changedTouches.length===D).event(y),N,H,C,L;for(so(y),H=0;H<D;++H)C=v[H],L=Be(C,this),L=[L,this.__zoom.invert(L),C.identifier],P.touch0?!P.touch1&&P.touch0[2]!==L[2]&&(P.touch1=L,P.taps=0):(P.touch0=L,N=!0,P.taps=1+!!c);c&&(c=clearTimeout(c)),N&&(P.taps<2&&(d=L[0],c=setTimeout(function(){c=null},p)),bn(this),P.start())}}function F(y,..._){if(this.__zooming){var v=k(this,_).event(y),D=y.changedTouches,P=D.length,N,H,C,L;for(zt(y),N=0;N<P;++N)H=D[N],C=Be(H,this),v.touch0&&v.touch0[2]===H.identifier?v.touch0[0]=C:v.touch1&&v.touch1[2]===H.identifier&&(v.touch1[0]=C);if(H=v.that.__zoom,v.touch1){var B=v.touch0[0],W=v.touch0[1],K=v.touch1[0],ne=v.touch1[1],G=(G=K[0]-B[0])*G+(G=K[1]-B[1])*G,Y=(Y=ne[0]-W[0])*Y+(Y=ne[1]-W[1])*Y;H=E(H,Math.sqrt(G/Y)),C=[(B[0]+K[0])/2,(B[1]+K[1])/2],L=[(W[0]+ne[0])/2,(W[1]+ne[1])/2]}else if(v.touch0)C=v.touch0[0],L=v.touch0[1];else return;v.zoom("touch",n(A(H,C,L),v.extent,i))}}function I(y,..._){if(this.__zooming){var v=k(this,_).event(y),D=y.changedTouches,P=D.length,N,H;for(so(y),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),N=0;N<P;++N)H=D[N],v.touch0&&v.touch0[2]===H.identifier?delete v.touch0:v.touch1&&v.touch1[2]===H.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(H=Be(H,this),Math.hypot(d[0]-H[0],d[1]-H[1])<S)){var C=$e(this).on("dblclick.zoom");C&&C.apply(this,arguments)}}}return b.wheelDelta=function(y){return arguments.length?(o=typeof y=="function"?y:ln(+y),b):o},b.filter=function(y){return arguments.length?(e=typeof y=="function"?y:ln(!!y),b):e},b.touchable=function(y){return arguments.length?(s=typeof y=="function"?y:ln(!!y),b):s},b.extent=function(y){return arguments.length?(t=typeof y=="function"?y:ln([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),b):t},b.scaleExtent=function(y){return arguments.length?(r[0]=+y[0],r[1]=+y[1],b):[r[0],r[1]]},b.translateExtent=function(y){return arguments.length?(i[0][0]=+y[0][0],i[1][0]=+y[1][0],i[0][1]=+y[0][1],i[1][1]=+y[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(y){return arguments.length?(n=y,b):n},b.duration=function(y){return arguments.length?(a=+y,b):a},b.interpolate=function(y){return arguments.length?(l=y,b):l},b.on=function(){var y=u.on.apply(u,arguments);return y===u?b:y},b.clickDistance=function(y){return arguments.length?(m=(y=+y)*y,b):Math.sqrt(m)},b.tapDistance=function(y){return arguments.length?(S=+y,b):S},b}const Fn=g.createContext(null),Af=Fn.Provider,Qe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ii=Qe.error001();function ce(e,t){const n=g.useContext(Fn);if(n===null)throw new Error(ii);return Dr(n,e,t)}const ge=()=>{const e=g.useContext(Fn);if(e===null)throw new Error(ii);return g.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Df=e=>e.userSelectionActive?"none":"all";function ai({position:e,children:t,className:n,style:o,...s}){const r=ce(Df),i=`${e}`.split("-");return z.createElement("div",{className:ve(["react-flow__panel",n,...i]),style:{...o,pointerEvents:r},...s},t)}function $f({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:z.createElement(ai,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},z.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Rf=({x:e,y:t,label:n,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:r={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c})=>{const d=g.useRef(null),[h,p]=g.useState({x:0,y:0,width:0,height:0}),x=ve(["react-flow__edge-textwrapper",u]);return g.useEffect(()=>{if(d.current){const m=d.current.getBBox();p({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:z.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...c},s&&z.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:r,rx:a,ry:a}),z.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:d,style:o},n),l)};var jf=g.memo(Rf);const Go=e=>({width:e.offsetWidth,height:e.offsetHeight}),At=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),qo=(e={x:0,y:0},t)=>({x:At(e.x,t[0][0],t[1][0]),y:At(e.y,t[0][1],t[1][1])}),Fs=(e,t,n)=>e<t?At(Math.abs(e-t),1,50)/50:e>n?-At(Math.abs(e-n),1,50)/50:0,li=(e,t)=>{const n=Fs(e.x,35,t.width-35)*20,o=Fs(e.y,35,t.height-35)*20;return[n,o]},ci=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Vf=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Ko=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),zf=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Os=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Eo=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Lf=e=>De(e.width)&&De(e.height)&&De(e.x)&&De(e.y),De=e=>!isNaN(e)&&isFinite(e),pe=Symbol.for("internals"),ui=["Enter"," ","Escape"],Pf=(e,t)=>{},Hf=e=>"nativeEvent"in e;function Co(e){var s,r;const t=Hf(e)?e.nativeEvent:e,n=((r=(s=t.composedPath)==null?void 0:s.call(t))==null?void 0:r[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const di=e=>"clientX"in e,at=(e,t)=>{var r,i;const n=di(e),o=n?e.clientX:(r=e.touches)==null?void 0:r[0].clientX,s=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},kn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},nn=({id:e,path:t,labelX:n,labelY:o,label:s,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:h,interactionWidth:p=20})=>z.createElement(z.Fragment,null,z.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:h}),p&&z.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),s&&De(n)&&De(o)?z.createElement(jf,{x:n,y:o,label:s,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u}):null);nn.displayName="BaseEdge";function Lt(e,t,n){return n===void 0?n:o=>{const s=t().edges.find(r=>r.id===e);s&&n(o,{...s})}}function fi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const s=Math.abs(n-e)/2,r=n<e?n+s:n-s,i=Math.abs(o-t)/2,a=o<t?o+i:o-i;return[r,a,s,i]}function hi({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:s,sourceControlY:r,targetControlX:i,targetControlY:a}){const l=e*.125+s*.375+i*.375+n*.125,u=t*.125+r*.375+a*.375+o*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}var bt;(function(e){e.Strict="strict",e.Loose="loose"})(bt||(bt={}));var mt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(mt||(mt={}));var Zt;(function(e){e.Partial="partial",e.Full="full"})(Zt||(Zt={}));var rt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(rt||(rt={}));var Tn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Tn||(Tn={}));var U;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(U||(U={}));function Bs({pos:e,x1:t,y1:n,x2:o,y2:s}){return e===U.Left||e===U.Right?[.5*(t+o),n]:[t,.5*(n+s)]}function pi({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:s,targetPosition:r=U.Top}){const[i,a]=Bs({pos:n,x1:e,y1:t,x2:o,y2:s}),[l,u]=Bs({pos:r,x1:o,y1:s,x2:e,y2:t}),[c,d,h,p]=hi({sourceX:e,sourceY:t,targetX:o,targetY:s,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${e},${t} C${i},${a} ${l},${u} ${o},${s}`,c,d,h,p]}const Zo=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:s=U.Bottom,targetPosition:r=U.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,interactionWidth:m})=>{const[S,b,E]=pi({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:o,targetPosition:r});return z.createElement(nn,{path:S,labelX:b,labelY:E,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,interactionWidth:m})});Zo.displayName="SimpleBezierEdge";const Ws={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},Ff=({source:e,sourcePosition:t=U.Bottom,target:n})=>t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Xs=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Of({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:o=U.Top,center:s,offset:r}){const i=Ws[t],a=Ws[o],l={x:e.x+i.x*r,y:e.y+i.y*r},u={x:n.x+a.x*r,y:n.y+a.y*r},c=Ff({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",h=c[d];let p=[],x,m;const S={x:0,y:0},b={x:0,y:0},[E,A,w,M]=fi({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*a[d]===-1){x=s.x||E,m=s.y||A;const j=[{x,y:l.y},{x,y:u.y}],V=[{x:l.x,y:m},{x:u.x,y:m}];i[d]===h?p=d==="x"?j:V:p=d==="x"?V:j}else{const j=[{x:l.x,y:u.y}],V=[{x:u.x,y:l.y}];if(d==="x"?p=i.x===h?V:j:p=i.y===h?j:V,t===o){const I=Math.abs(e[d]-n[d]);if(I<=r){const y=Math.min(r-1,r-I);i[d]===h?S[d]=(l[d]>e[d]?-1:1)*y:b[d]=(u[d]>n[d]?-1:1)*y}}if(t!==o){const I=d==="x"?"y":"x",y=i[d]===a[I],_=l[I]>u[I],v=l[I]<u[I];(i[d]===1&&(!y&&_||y&&v)||i[d]!==1&&(!y&&v||y&&_))&&(p=d==="x"?j:V)}const $={x:l.x+S.x,y:l.y+S.y},T={x:u.x+b.x,y:u.y+b.y},R=Math.max(Math.abs($.x-p[0].x),Math.abs(T.x-p[0].x)),F=Math.max(Math.abs($.y-p[0].y),Math.abs(T.y-p[0].y));R>=F?(x=($.x+T.x)/2,m=p[0].y):(x=p[0].x,m=($.y+T.y)/2)}return[[e,{x:l.x+S.x,y:l.y+S.y},...p,{x:u.x+b.x,y:u.y+b.y},n],x,m,w,M]}function Bf(e,t,n,o){const s=Math.min(Xs(e,t)/2,Xs(t,n)/2,o),{x:r,y:i}=t;if(e.x===r&&r===n.x||e.y===i&&i===n.y)return`L${r} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${r+s*u},${i}Q ${r},${i} ${r},${i+s*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${r},${i+s*l}Q ${r},${i} ${r+s*a},${i}`}function No({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:s,targetPosition:r=U.Top,borderRadius:i=5,centerX:a,centerY:l,offset:u=20}){const[c,d,h,p,x]=Of({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:s},targetPosition:r,center:{x:a,y:l},offset:u});return[c.reduce((S,b,E)=>{let A="";return E>0&&E<c.length-1?A=Bf(c[E-1],b,c[E+1],i):A=`${E===0?"M":"L"}${b.x} ${b.y}`,S+=A,S},""),d,h,p,x]}const On=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:s,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,sourcePosition:d=U.Bottom,targetPosition:h=U.Top,markerEnd:p,markerStart:x,pathOptions:m,interactionWidth:S})=>{const[b,E,A]=No({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:o,targetPosition:h,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset});return z.createElement(nn,{path:b,labelX:E,labelY:A,label:s,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:p,markerStart:x,interactionWidth:S})});On.displayName="SmoothStepEdge";const Jo=g.memo(e=>{var t;return z.createElement(On,{...e,pathOptions:g.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Jo.displayName="StepEdge";function Wf({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[s,r,i,a]=fi({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,s,r,i,a]}const Qo=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:s,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:h,interactionWidth:p})=>{const[x,m,S]=Wf({sourceX:e,sourceY:t,targetX:n,targetY:o});return z.createElement(nn,{path:x,labelX:m,labelY:S,label:s,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:h,interactionWidth:p})});Qo.displayName="StraightEdge";function cn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ys({pos:e,x1:t,y1:n,x2:o,y2:s,c:r}){switch(e){case U.Left:return[t-cn(t-o,r),n];case U.Right:return[t+cn(o-t,r),n];case U.Top:return[t,n-cn(n-s,r)];case U.Bottom:return[t,n+cn(s-n,r)]}}function gi({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:s,targetPosition:r=U.Top,curvature:i=.25}){const[a,l]=Ys({pos:n,x1:e,y1:t,x2:o,y2:s,c:i}),[u,c]=Ys({pos:r,x1:o,y1:s,x2:e,y2:t,c:i}),[d,h,p,x]=hi({sourceX:e,sourceY:t,targetX:o,targetY:s,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${a},${l} ${u},${c} ${o},${s}`,d,h,p,x]}const Mn=g.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:s=U.Bottom,targetPosition:r=U.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,pathOptions:m,interactionWidth:S})=>{const[b,E,A]=gi({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:o,targetPosition:r,curvature:m==null?void 0:m.curvature});return z.createElement(nn,{path:b,labelX:E,labelY:A,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:h,markerEnd:p,markerStart:x,interactionWidth:S})});Mn.displayName="BezierEdge";const es=g.createContext(null),Xf=es.Provider;es.Consumer;const Yf=()=>g.useContext(es),Uf=e=>"id"in e&&"source"in e&&"target"in e,Gf=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`reactflow__edge-${e}${t||""}-${n}${o||""}`,Io=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,qf=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Kf=(e,t)=>{if(!e.source||!e.target)return t;let n;return Uf(e)?n={...e}:n={...e,id:Gf(e)},qf(n,t)?t:t.concat(n)},ko=({x:e,y:t},[n,o,s],r,[i,a])=>{const l={x:(e-n)/s,y:(t-o)/s};return r?{x:i*Math.round(l.x/i),y:a*Math.round(l.y/a)}:l},mi=({x:e,y:t},[n,o,s])=>({x:e*s+n,y:t*s+o}),It=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],o=(e.height??0)*t[1],s={x:e.position.x-n,y:e.position.y-o};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-o}:s}},ts=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,s)=>{const{x:r,y:i}=It(s,t).positionAbsolute;return Vf(o,Ko({x:r,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return zf(n)},xi=(e,t,[n,o,s]=[0,0,1],r=!1,i=!1,a=[0,0])=>{const l={x:(t.x-n)/s,y:(t.y-o)/s,width:t.width/s,height:t.height/s},u=[];return e.forEach(c=>{const{width:d,height:h,selectable:p=!0,hidden:x=!1}=c;if(i&&!p||x)return!1;const{positionAbsolute:m}=It(c,a),S={x:m.x,y:m.y,width:d||0,height:h||0},b=Eo(l,S),E=typeof d>"u"||typeof h>"u"||d===null||h===null,A=r&&b>0,w=(d||0)*(h||0);(E||A||b>=w||c.dragging)&&u.push(c)}),u},yi=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},bi=(e,t,n,o,s,r=.1)=>{const i=t/(e.width*(1+r)),a=n/(e.height*(1+r)),l=Math.min(i,a),u=At(l,o,s),c=e.x+e.width/2,d=e.y+e.height/2,h=t/2-c*u,p=n/2-d*u;return{x:h,y:p,zoom:u}},ht=(e,t=0)=>e.transition().duration(t);function Us(e,t,n,o){return(t[n]||[]).reduce((s,r)=>{var i,a;return`${e.id}-${r.id}-${n}`!==o&&s.push({id:r.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+r.x+r.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+r.y+r.height/2}),s},[])}function Zf(e,t,n,o,s,r){const{x:i,y:a}=at(e),u=t.elementsFromPoint(i,a).find(x=>x.classList.contains("react-flow__handle"));if(u){const x=u.getAttribute("data-nodeid");if(x){const m=ns(void 0,u),S=u.getAttribute("data-handleid"),b=r({nodeId:x,id:S,type:m});if(b){const E=s.find(A=>A.nodeId===x&&A.type===m&&A.id===S);return{handle:{id:S,type:m,nodeId:x,x:(E==null?void 0:E.x)||n.x,y:(E==null?void 0:E.y)||n.y},validHandleResult:b}}}}let c=[],d=1/0;if(s.forEach(x=>{const m=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(m<=o){const S=r(x);m<=d&&(m<d?c=[{handle:x,validHandleResult:S}]:m===d&&c.push({handle:x,validHandleResult:S}),d=m)}}),!c.length)return{handle:null,validHandleResult:wi()};if(c.length===1)return c[0];const h=c.some(({validHandleResult:x})=>x.isValid),p=c.some(({handle:x})=>x.type==="target");return c.find(({handle:x,validHandleResult:m})=>p?x.type==="target":h?m.isValid:!0)||c[0]}const Jf={source:null,target:null,sourceHandle:null,targetHandle:null},wi=()=>({handleDomNode:null,isValid:!1,connection:Jf,endHandle:null});function vi(e,t,n,o,s,r,i){const a=s==="target",l=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...wi(),handleDomNode:l};if(l){const c=ns(void 0,l),d=l.getAttribute("data-nodeid"),h=l.getAttribute("data-handleid"),p=l.classList.contains("connectable"),x=l.classList.contains("connectableend"),m={source:a?d:n,sourceHandle:a?h:o,target:a?n:d,targetHandle:a?o:h};u.connection=m,p&&x&&(t===bt.Strict?a&&c==="source"||!a&&c==="target":d!==n||h!==o)&&(u.endHandle={nodeId:d,handleId:h,type:c},u.isValid=r(m))}return u}function Qf({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((s,r)=>{if(r[pe]){const{handleBounds:i}=r[pe];let a=[],l=[];i&&(a=Us(r,i,"source",`${t}-${n}-${o}`),l=Us(r,i,"target",`${t}-${n}-${o}`)),s.push(...a,...l)}return s},[])}function ns(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function ro(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function eh(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Si({event:e,handleId:t,nodeId:n,onConnect:o,isTarget:s,getState:r,setState:i,isValidConnection:a,edgeUpdaterType:l,onEdgeUpdateEnd:u}){const c=ci(e.target),{connectionMode:d,domNode:h,autoPanOnConnect:p,connectionRadius:x,onConnectStart:m,panBy:S,getNodes:b,cancelConnection:E}=r();let A=0,w;const{x:M,y:k}=at(e),j=c==null?void 0:c.elementFromPoint(M,k),V=ns(l,j),$=h==null?void 0:h.getBoundingClientRect();if(!$||!V)return;let T,R=at(e,$),F=!1,I=null,y=!1,_=null;const v=Qf({nodes:b(),nodeId:n,handleId:t,handleType:V}),D=()=>{if(!p)return;const[H,C]=li(R,$);S({x:H,y:C}),A=requestAnimationFrame(D)};i({connectionPosition:R,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:V,connectionStartHandle:{nodeId:n,handleId:t,type:V},connectionEndHandle:null}),m==null||m(e,{nodeId:n,handleId:t,handleType:V});function P(H){const{transform:C}=r();R=at(H,$);const{handle:L,validHandleResult:B}=Zf(H,c,ko(R,C,!1,[1,1]),x,v,W=>vi(W,d,n,t,s?"target":"source",a,c));if(w=L,F||(D(),F=!0),_=B.handleDomNode,I=B.connection,y=B.isValid,i({connectionPosition:w&&y?mi({x:w.x,y:w.y},C):R,connectionStatus:eh(!!w,y),connectionEndHandle:B.endHandle}),!w&&!y&&!_)return ro(T);I.source!==I.target&&_&&(ro(T),T=_,_.classList.add("connecting","react-flow__handle-connecting"),_.classList.toggle("valid",y),_.classList.toggle("react-flow__handle-valid",y))}function N(H){var C,L;(w||_)&&I&&y&&(o==null||o(I)),(L=(C=r()).onConnectEnd)==null||L.call(C,H),l&&(u==null||u(H)),ro(T),E(),cancelAnimationFrame(A),F=!1,y=!1,I=null,_=null,c.removeEventListener("mousemove",P),c.removeEventListener("mouseup",N),c.removeEventListener("touchmove",P),c.removeEventListener("touchend",N)}c.addEventListener("mousemove",P),c.addEventListener("mouseup",N),c.addEventListener("touchmove",P),c.addEventListener("touchend",N)}const Gs=()=>!0,th=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),nh=(e,t,n)=>o=>{const{connectionStartHandle:s,connectionEndHandle:r,connectionClickStartHandle:i}=o;return{connecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n||(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},_i=g.forwardRef(({type:e="source",position:t=U.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:r=!0,id:i,onConnect:a,children:l,className:u,onMouseDown:c,onTouchStart:d,...h},p)=>{var $,T;const x=i||null,m=e==="target",S=ge(),b=Yf(),{connectOnClick:E,noPanClassName:A}=ce(th,ye),{connecting:w,clickConnecting:M}=ce(nh(b,x,e),ye);b||(T=($=S.getState()).onError)==null||T.call($,"010",Qe.error010());const k=R=>{const{defaultEdgeOptions:F,onConnect:I,hasDefaultEdges:y}=S.getState(),_={...F,...R};if(y){const{edges:v,setEdges:D}=S.getState();D(Kf(_,v))}I==null||I(_),a==null||a(_)},j=R=>{if(!b)return;const F=di(R);s&&(F&&R.button===0||!F)&&Si({event:R,handleId:x,nodeId:b,onConnect:k,isTarget:m,getState:S.getState,setState:S.setState,isValidConnection:n||S.getState().isValidConnection||Gs}),F?c==null||c(R):d==null||d(R)},V=R=>{const{onClickConnectStart:F,onClickConnectEnd:I,connectionClickStartHandle:y,connectionMode:_,isValidConnection:v}=S.getState();if(!b||!y&&!s)return;if(!y){F==null||F(R,{nodeId:b,handleId:x,handleType:e}),S.setState({connectionClickStartHandle:{nodeId:b,type:e,handleId:x}});return}const D=ci(R.target),P=n||v||Gs,{connection:N,isValid:H}=vi({nodeId:b,id:x,type:e},_,y.nodeId,y.handleId||null,y.type,P,D);H&&k(N),I==null||I(R),S.setState({connectionClickStartHandle:null})};return z.createElement("div",{"data-handleid":x,"data-nodeid":b,"data-handlepos":t,"data-id":`${b}-${x}-${e}`,className:ve(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",A,u,{source:!m,target:m,connectable:o,connectablestart:s,connectableend:r,connecting:M,connectionindicator:o&&(s&&!w||r&&w)}]),onMouseDown:j,onTouchStart:j,onClick:E?V:void 0,ref:p,...h},l)});_i.displayName="Handle";var je=g.memo(_i);const Ei=({data:e,isConnectable:t,targetPosition:n=U.Top,sourcePosition:o=U.Bottom})=>z.createElement(z.Fragment,null,z.createElement(je,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,z.createElement(je,{type:"source",position:o,isConnectable:t}));Ei.displayName="DefaultNode";var To=g.memo(Ei);const Ci=({data:e,isConnectable:t,sourcePosition:n=U.Bottom})=>z.createElement(z.Fragment,null,e==null?void 0:e.label,z.createElement(je,{type:"source",position:n,isConnectable:t}));Ci.displayName="InputNode";var Ni=g.memo(Ci);const Ii=({data:e,isConnectable:t,targetPosition:n=U.Top})=>z.createElement(z.Fragment,null,z.createElement(je,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Ii.displayName="OutputNode";var ki=g.memo(Ii);const os=()=>null;os.displayName="GroupNode";const oh=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),un=e=>e.id;function sh(e,t){return ye(e.selectedNodes.map(un),t.selectedNodes.map(un))&&ye(e.selectedEdges.map(un),t.selectedEdges.map(un))}const Ti=g.memo(({onSelectionChange:e})=>{const t=ge(),{selectedNodes:n,selectedEdges:o}=ce(oh,sh);return g.useEffect(()=>{const s={nodes:n,edges:o};e==null||e(s),t.getState().onSelectionChange.forEach(r=>r(s))},[n,o,e]),null});Ti.displayName="SelectionListener";const rh=e=>!!e.onSelectionChange;function ih({onSelectionChange:e}){const t=ce(rh);return e||t?z.createElement(Ti,{onSelectionChange:e}):null}const ah=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function wt(e,t){g.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function te(e,t,n){g.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const lh=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:s,onConnectStart:r,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:c,nodesFocusable:d,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:x,minZoom:m,maxZoom:S,nodeExtent:b,onNodesChange:E,onEdgesChange:A,elementsSelectable:w,connectionMode:M,snapGrid:k,snapToGrid:j,translateExtent:V,connectOnClick:$,defaultEdgeOptions:T,fitView:R,fitViewOptions:F,onNodesDelete:I,onEdgesDelete:y,onNodeDrag:_,onNodeDragStart:v,onNodeDragStop:D,onSelectionDrag:P,onSelectionDragStart:N,onSelectionDragStop:H,noPanClassName:C,nodeOrigin:L,rfId:B,autoPanOnConnect:W,autoPanOnNodeDrag:K,onError:ne,connectionRadius:G,isValidConnection:Y,nodeDragThreshold:J})=>{const{setNodes:Q,setEdges:le,setDefaultNodesAndEdges:Ne,setMinZoom:ke,setMaxZoom:de,setTranslateExtent:Te,setNodeExtent:ie,reset:xe}=ce(ah,ye),q=ge();return g.useEffect(()=>{const Ye=o==null?void 0:o.map(Le=>({...Le,...T}));return Ne(n,Ye),()=>{xe()}},[]),te("defaultEdgeOptions",T,q.setState),te("connectionMode",M,q.setState),te("onConnect",s,q.setState),te("onConnectStart",r,q.setState),te("onConnectEnd",i,q.setState),te("onClickConnectStart",a,q.setState),te("onClickConnectEnd",l,q.setState),te("nodesDraggable",u,q.setState),te("nodesConnectable",c,q.setState),te("nodesFocusable",d,q.setState),te("edgesFocusable",h,q.setState),te("edgesUpdatable",p,q.setState),te("elementsSelectable",w,q.setState),te("elevateNodesOnSelect",x,q.setState),te("snapToGrid",j,q.setState),te("snapGrid",k,q.setState),te("onNodesChange",E,q.setState),te("onEdgesChange",A,q.setState),te("connectOnClick",$,q.setState),te("fitViewOnInit",R,q.setState),te("fitViewOnInitOptions",F,q.setState),te("onNodesDelete",I,q.setState),te("onEdgesDelete",y,q.setState),te("onNodeDrag",_,q.setState),te("onNodeDragStart",v,q.setState),te("onNodeDragStop",D,q.setState),te("onSelectionDrag",P,q.setState),te("onSelectionDragStart",N,q.setState),te("onSelectionDragStop",H,q.setState),te("noPanClassName",C,q.setState),te("nodeOrigin",L,q.setState),te("rfId",B,q.setState),te("autoPanOnConnect",W,q.setState),te("autoPanOnNodeDrag",K,q.setState),te("onError",ne,q.setState),te("connectionRadius",G,q.setState),te("isValidConnection",Y,q.setState),te("nodeDragThreshold",J,q.setState),wt(e,Q),wt(t,le),wt(m,ke),wt(S,de),wt(V,Te),wt(b,ie),null},qs={display:"none"},ch={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Mi="react-flow__node-desc",Ai="react-flow__edge-desc",uh="react-flow__aria-live",dh=e=>e.ariaLiveMessage;function fh({rfId:e}){const t=ce(dh);return z.createElement("div",{id:`${uh}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:ch},t)}function hh({rfId:e,disableKeyboardA11y:t}){return z.createElement(z.Fragment,null,z.createElement("div",{id:`${Mi}-${e}`,style:qs},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),z.createElement("div",{id:`${Ai}-${e}`,style:qs},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&z.createElement(fh,{rfId:e}))}var Jt=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,o]=g.useState(!1),s=g.useRef(!1),r=g.useRef(new Set([])),[i,a]=g.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),c=u.reduce((d,h)=>d.concat(...h),[]);return[u,c]}return[[],[]]},[e]);return g.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(e!==null){const c=p=>{if(s.current=p.ctrlKey||p.metaKey||p.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&Co(p))return!1;const m=Zs(p.code,a);r.current.add(p[m]),Ks(i,r.current,!1)&&(p.preventDefault(),o(!0))},d=p=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&Co(p))return!1;const m=Zs(p.code,a);Ks(i,r.current,!0)?(o(!1),r.current.clear()):r.current.delete(p[m]),p.key==="Meta"&&r.current.clear(),s.current=!1},h=()=>{r.current.clear(),o(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",h)}}},[e,o]),n};function Ks(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(s=>t.has(s)))}function Zs(e,t){return t.includes(e)?"code":"key"}function Di(e,t,n,o){var i,a;if(!e.parentNode)return n;const s=t.get(e.parentNode),r=It(s,o);return Di(s,t,{x:(n.x??0)+r.x,y:(n.y??0)+r.y,z:(((i=s[pe])==null?void 0:i.z)??0)>(n.z??0)?((a=s[pe])==null?void 0:a.z)??0:n.z??0},o)}function $i(e,t,n){e.forEach(o=>{var s;if(o.parentNode&&!e.has(o.parentNode))throw new Error(`Parent node ${o.parentNode} not found`);if(o.parentNode||n!=null&&n[o.id]){const{x:r,y:i,z:a}=Di(o,e,{...o.position,z:((s=o[pe])==null?void 0:s.z)??0},t);o.positionAbsolute={x:r,y:i},o[pe].z=a,n!=null&&n[o.id]&&(o[pe].isParent=!0)}})}function io(e,t,n,o){const s=new Map,r={},i=o?1e3:0;return e.forEach(a=>{var h;const l=(De(a.zIndex)?a.zIndex:0)+(a.selected?i:0),u=t.get(a.id),c={...a,positionAbsolute:{x:a.position.x,y:a.position.y}};a.parentNode&&(r[a.parentNode]=!0);const d=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(c,pe,{enumerable:!1,value:{handleBounds:d||(h=u==null?void 0:u[pe])==null?void 0:h.handleBounds,z:l}}),s.set(a.id,c)}),$i(s,n,r),s}function Ri(e,t={}){const{getNodes:n,width:o,height:s,minZoom:r,maxZoom:i,d3Zoom:a,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:c,nodeOrigin:d}=e(),h=t.initial&&!u&&c;if(a&&l&&(h||!t.initial)){const x=n().filter(S=>{var E;const b=t.includeHiddenNodes?S.width&&S.height:!S.hidden;return(E=t.nodes)!=null&&E.length?b&&t.nodes.some(A=>A.id===S.id):b}),m=x.every(S=>S.width&&S.height);if(x.length>0&&m){const S=ts(x,d),{x:b,y:E,zoom:A}=bi(S,o,s,t.minZoom??r,t.maxZoom??i,t.padding??.1),w=it.translate(b,E).scale(A);return typeof t.duration=="number"&&t.duration>0?a.transform(ht(l,t.duration),w):a.transform(l,w),!0}}return!1}function ph(e,t){return e.forEach(n=>{const o=t.get(n.id);o&&t.set(o.id,{...o,[pe]:o[pe],selected:n.selected})}),new Map(t)}function gh(e,t){return t.map(n=>{const o=e.find(s=>s.id===n.id);return o&&(n.selected=o.selected),n})}function dn({changedNodes:e,changedEdges:t,get:n,set:o}){const{nodeInternals:s,edges:r,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:u}=n();e!=null&&e.length&&(l&&o({nodeInternals:ph(e,s)}),i==null||i(e)),t!=null&&t.length&&(u&&o({edges:gh(t,r)}),a==null||a(t))}const vt=()=>{},mh={zoomIn:vt,zoomOut:vt,zoomTo:vt,getZoom:()=>1,setViewport:vt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:vt,fitBounds:vt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},xh=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),yh=()=>{const e=ge(),{d3Zoom:t,d3Selection:n}=ce(xh,ye);return g.useMemo(()=>n&&t?{zoomIn:s=>t.scaleBy(ht(n,s==null?void 0:s.duration),1.2),zoomOut:s=>t.scaleBy(ht(n,s==null?void 0:s.duration),1/1.2),zoomTo:(s,r)=>t.scaleTo(ht(n,r==null?void 0:r.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,r)=>{const[i,a,l]=e.getState().transform,u=it.translate(s.x??i,s.y??a).scale(s.zoom??l);t.transform(ht(n,r==null?void 0:r.duration),u)},getViewport:()=>{const[s,r,i]=e.getState().transform;return{x:s,y:r,zoom:i}},fitView:s=>Ri(e.getState,s),setCenter:(s,r,i)=>{const{width:a,height:l,maxZoom:u}=e.getState(),c=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,d=a/2-s*c,h=l/2-r*c,p=it.translate(d,h).scale(c);t.transform(ht(n,i==null?void 0:i.duration),p)},fitBounds:(s,r)=>{const{width:i,height:a,minZoom:l,maxZoom:u}=e.getState(),{x:c,y:d,zoom:h}=bi(s,i,a,l,u,(r==null?void 0:r.padding)??.1),p=it.translate(c,d).scale(h);t.transform(ht(n,r==null?void 0:r.duration),p)},project:s=>{const{transform:r,snapToGrid:i,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),ko(s,r,i,a)},screenToFlowPosition:s=>{const{transform:r,snapToGrid:i,snapGrid:a,domNode:l}=e.getState();if(!l)return s;const{x:u,y:c}=l.getBoundingClientRect(),d={x:s.x-u,y:s.y-c};return ko(d,r,i,a)},flowToScreenPosition:s=>{const{transform:r,domNode:i}=e.getState();if(!i)return s;const{x:a,y:l}=i.getBoundingClientRect(),u=mi(s,r);return{x:u.x+a,y:u.y+l}},viewportInitialized:!0}:mh,[t,n])};function ss(){const e=yh(),t=ge(),n=g.useCallback(()=>t.getState().getNodes().map(m=>({...m})),[]),o=g.useCallback(m=>t.getState().nodeInternals.get(m),[]),s=g.useCallback(()=>{const{edges:m=[]}=t.getState();return m.map(S=>({...S}))},[]),r=g.useCallback(m=>{const{edges:S=[]}=t.getState();return S.find(b=>b.id===m)},[]),i=g.useCallback(m=>{const{getNodes:S,setNodes:b,hasDefaultNodes:E,onNodesChange:A}=t.getState(),w=S(),M=typeof m=="function"?m(w):m;if(E)b(M);else if(A){const k=M.length===0?w.map(j=>({type:"remove",id:j.id})):M.map(j=>({item:j,type:"reset"}));A(k)}},[]),a=g.useCallback(m=>{const{edges:S=[],setEdges:b,hasDefaultEdges:E,onEdgesChange:A}=t.getState(),w=typeof m=="function"?m(S):m;if(E)b(w);else if(A){const M=w.length===0?S.map(k=>({type:"remove",id:k.id})):w.map(k=>({item:k,type:"reset"}));A(M)}},[]),l=g.useCallback(m=>{const S=Array.isArray(m)?m:[m],{getNodes:b,setNodes:E,hasDefaultNodes:A,onNodesChange:w}=t.getState();if(A){const k=[...b(),...S];E(k)}else if(w){const M=S.map(k=>({item:k,type:"add"}));w(M)}},[]),u=g.useCallback(m=>{const S=Array.isArray(m)?m:[m],{edges:b=[],setEdges:E,hasDefaultEdges:A,onEdgesChange:w}=t.getState();if(A)E([...b,...S]);else if(w){const M=S.map(k=>({item:k,type:"add"}));w(M)}},[]),c=g.useCallback(()=>{const{getNodes:m,edges:S=[],transform:b}=t.getState(),[E,A,w]=b;return{nodes:m().map(M=>({...M})),edges:S.map(M=>({...M})),viewport:{x:E,y:A,zoom:w}}},[]),d=g.useCallback(({nodes:m,edges:S})=>{const{nodeInternals:b,getNodes:E,edges:A,hasDefaultNodes:w,hasDefaultEdges:M,onNodesDelete:k,onEdgesDelete:j,onNodesChange:V,onEdgesChange:$}=t.getState(),T=(m||[]).map(_=>_.id),R=(S||[]).map(_=>_.id),F=E().reduce((_,v)=>{const D=!T.includes(v.id)&&v.parentNode&&_.find(N=>N.id===v.parentNode);return(typeof v.deletable=="boolean"?v.deletable:!0)&&(T.includes(v.id)||D)&&_.push(v),_},[]),I=A.filter(_=>typeof _.deletable=="boolean"?_.deletable:!0),y=I.filter(_=>R.includes(_.id));if(F||y){const _=yi(F,I),v=[...y,..._],D=v.reduce((P,N)=>(P.includes(N.id)||P.push(N.id),P),[]);if((M||w)&&(M&&t.setState({edges:A.filter(P=>!D.includes(P.id))}),w&&(F.forEach(P=>{b.delete(P.id)}),t.setState({nodeInternals:new Map(b)}))),D.length>0&&(j==null||j(v),$&&$(D.map(P=>({id:P,type:"remove"})))),F.length>0&&(k==null||k(F),V)){const P=F.map(N=>({id:N.id,type:"remove"}));V(P)}}},[]),h=g.useCallback(m=>{const S=Lf(m),b=S?null:t.getState().nodeInternals.get(m.id);return!S&&!b?[null,null,S]:[S?m:Os(b),b,S]},[]),p=g.useCallback((m,S=!0,b)=>{const[E,A,w]=h(m);return E?(b||t.getState().getNodes()).filter(M=>{if(!w&&(M.id===A.id||!M.positionAbsolute))return!1;const k=Os(M),j=Eo(k,E);return S&&j>0||j>=E.width*E.height}):[]},[]),x=g.useCallback((m,S,b=!0)=>{const[E]=h(m);if(!E)return!1;const A=Eo(E,S);return b&&A>0||A>=E.width*E.height},[]);return g.useMemo(()=>({...e,getNodes:n,getNode:o,getEdges:s,getEdge:r,setNodes:i,setEdges:a,addNodes:l,addEdges:u,toObject:c,deleteElements:d,getIntersectingNodes:p,isNodeIntersecting:x}),[e,n,o,s,r,i,a,l,u,c,d,p,x])}const bh={actInsideInputWithModifier:!1};var wh=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=ge(),{deleteElements:o}=ss(),s=Jt(e,bh),r=Jt(t);g.useEffect(()=>{if(s){const{edges:i,getNodes:a}=n.getState(),l=a().filter(c=>c.selected),u=i.filter(c=>c.selected);o({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[s]),g.useEffect(()=>{n.setState({multiSelectionActive:r})},[r])};function vh(e){const t=ge();g.useEffect(()=>{let n;const o=()=>{var r,i;if(!e.current)return;const s=Go(e.current);(s.height===0||s.width===0)&&((i=(r=t.getState()).onError)==null||i.call(r,"004",Qe.error004())),t.setState({width:s.width||500,height:s.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver(()=>o()),n.observe(e.current)),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}},[])}const rs={position:"absolute",width:"100%",height:"100%",top:0,left:0},Sh=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,fn=e=>({x:e.x,y:e.y,zoom:e.k}),St=(e,t)=>e.target.closest(`.${t}`),Js=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Qs=e=>{const t=e.ctrlKey&&kn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},_h=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Eh=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:s=!0,zoomOnPinch:r=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=mt.Free,zoomOnDoubleClick:u=!0,elementsSelectable:c,panOnDrag:d=!0,defaultViewport:h,translateExtent:p,minZoom:x,maxZoom:m,zoomActivationKeyCode:S,preventScrolling:b=!0,children:E,noWheelClassName:A,noPanClassName:w})=>{const M=g.useRef(),k=ge(),j=g.useRef(!1),V=g.useRef(!1),$=g.useRef(null),T=g.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:F,d3ZoomHandler:I,userSelectionActive:y}=ce(_h,ye),_=Jt(S),v=g.useRef(0),D=g.useRef(!1),P=g.useRef();return vh($),g.useEffect(()=>{if($.current){const N=$.current.getBoundingClientRect(),H=Mf().scaleExtent([x,m]).translateExtent(p),C=$e($.current).call(H),L=it.translate(h.x,h.y).scale(At(h.zoom,x,m)),B=[[0,0],[N.width,N.height]],W=H.constrain()(L,B,p);H.transform(C,W),H.wheelDelta(Qs),k.setState({d3Zoom:H,d3Selection:C,d3ZoomHandler:C.on("wheel.zoom"),transform:[W.x,W.y,W.k],domNode:$.current.closest(".react-flow")})}},[]),g.useEffect(()=>{F&&R&&(i&&!_&&!y?F.on("wheel.zoom",N=>{if(St(N,A))return!1;N.preventDefault(),N.stopImmediatePropagation();const H=F.property("__zoom").k||1,C=kn();if(N.ctrlKey&&r&&C){const J=Be(N),Q=Qs(N),le=H*Math.pow(2,Q);R.scaleTo(F,le,J,N);return}const L=N.deltaMode===1?20:1;let B=l===mt.Vertical?0:N.deltaX*L,W=l===mt.Horizontal?0:N.deltaY*L;!C&&N.shiftKey&&l!==mt.Vertical&&(B=N.deltaY*L,W=0),R.translateBy(F,-(B/H)*a,-(W/H)*a,{internal:!0});const K=fn(F.property("__zoom")),{onViewportChangeStart:ne,onViewportChange:G,onViewportChangeEnd:Y}=k.getState();clearTimeout(P.current),D.current||(D.current=!0,t==null||t(N,K),ne==null||ne(K)),D.current&&(e==null||e(N,K),G==null||G(K),P.current=setTimeout(()=>{n==null||n(N,K),Y==null||Y(K),D.current=!1},150))},{passive:!1}):typeof I<"u"&&F.on("wheel.zoom",function(N,H){if(!b||St(N,A))return null;N.preventDefault(),I.call(this,N,H)},{passive:!1}))},[y,i,l,F,R,I,_,r,b,A,t,e,n]),g.useEffect(()=>{R&&R.on("start",N=>{var L,B;if(!N.sourceEvent||N.sourceEvent.internal)return null;v.current=(L=N.sourceEvent)==null?void 0:L.button;const{onViewportChangeStart:H}=k.getState(),C=fn(N.transform);j.current=!0,T.current=C,((B=N.sourceEvent)==null?void 0:B.type)==="mousedown"&&k.setState({paneDragging:!0}),H==null||H(C),t==null||t(N.sourceEvent,C)})},[R,t]),g.useEffect(()=>{R&&(y&&!j.current?R.on("zoom",null):y||R.on("zoom",N=>{var C;const{onViewportChange:H}=k.getState();if(k.setState({transform:[N.transform.x,N.transform.y,N.transform.k]}),V.current=!!(o&&Js(d,v.current??0)),(e||H)&&!((C=N.sourceEvent)!=null&&C.internal)){const L=fn(N.transform);H==null||H(L),e==null||e(N.sourceEvent,L)}}))},[y,R,e,d,o]),g.useEffect(()=>{R&&R.on("end",N=>{if(!N.sourceEvent||N.sourceEvent.internal)return null;const{onViewportChangeEnd:H}=k.getState();if(j.current=!1,k.setState({paneDragging:!1}),o&&Js(d,v.current??0)&&!V.current&&o(N.sourceEvent),V.current=!1,(n||H)&&Sh(T.current,N.transform)){const C=fn(N.transform);T.current=C,clearTimeout(M.current),M.current=setTimeout(()=>{H==null||H(C),n==null||n(N.sourceEvent,C)},i?150:0)}})},[R,i,d,n,o]),g.useEffect(()=>{R&&R.filter(N=>{const H=_||s,C=r&&N.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&N.button===1&&N.type==="mousedown"&&(St(N,"react-flow__node")||St(N,"react-flow__edge")))return!0;if(!d&&!H&&!i&&!u&&!r||y||!u&&N.type==="dblclick"||St(N,A)&&N.type==="wheel"||St(N,w)&&(N.type!=="wheel"||i&&N.type==="wheel"&&!_)||!r&&N.ctrlKey&&N.type==="wheel"||!H&&!i&&!C&&N.type==="wheel"||!d&&(N.type==="mousedown"||N.type==="touchstart")||Array.isArray(d)&&!d.includes(N.button)&&(N.type==="mousedown"||N.type==="touchstart"))return!1;const L=Array.isArray(d)&&d.includes(N.button)||!N.button||N.button<=1;return(!N.ctrlKey||N.type==="wheel")&&L})},[y,R,s,r,i,u,d,c,_]),z.createElement("div",{className:"react-flow__renderer",ref:$,style:rs},E)},Ch=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Nh(){const{userSelectionActive:e,userSelectionRect:t}=ce(Ch,ye);return e&&t?z.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function er(e,t){const n=e.find(o=>o.id===t.parentNode);if(n){const o=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(o>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,o>0&&(n.style.width+=o),s>0&&(n.style.height+=s),t.position.x<0){const r=Math.abs(t.position.x);n.position.x=n.position.x-r,n.style.width+=r,t.position.x=0}if(t.position.y<0){const r=Math.abs(t.position.y);n.position.y=n.position.y-r,n.style.height+=r,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function ji(e,t){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const n=e.filter(o=>o.type==="add").map(o=>o.item);return t.reduce((o,s)=>{const r=e.filter(a=>a.id===s.id);if(r.length===0)return o.push(s),o;const i={...s};for(const a of r)if(a)switch(a.type){case"select":{i.selected=a.selected;break}case"position":{typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&er(o,i);break}case"dimensions":{typeof a.dimensions<"u"&&(i.width=a.dimensions.width,i.height=a.dimensions.height),typeof a.updateStyle<"u"&&(i.style={...i.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(i.resizing=a.resizing),i.expandParent&&er(o,i);break}case"remove":return o}return o.push(i),o},n)}function Vi(e,t){return ji(e,t)}function Ih(e,t){return ji(e,t)}const st=(e,t)=>({id:e,type:"select",selected:t});function Et(e,t){return e.reduce((n,o)=>{const s=t.includes(o.id);return!o.selected&&s?(o.selected=!0,n.push(st(o.id,!0))):o.selected&&!s&&(o.selected=!1,n.push(st(o.id,!1))),n},[])}const ao=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},kh=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),zi=g.memo(({isSelecting:e,selectionMode:t=Zt.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:s,onPaneClick:r,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:c,children:d})=>{const h=g.useRef(null),p=ge(),x=g.useRef(0),m=g.useRef(0),S=g.useRef(),{userSelectionActive:b,elementsSelectable:E,dragging:A}=ce(kh,ye),w=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,m.current=0},M=I=>{r==null||r(I),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},k=I=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){I.preventDefault();return}i==null||i(I)},j=a?I=>a(I):void 0,V=I=>{const{resetSelectedElements:y,domNode:_}=p.getState();if(S.current=_==null?void 0:_.getBoundingClientRect(),!E||!e||I.button!==0||I.target!==h.current||!S.current)return;const{x:v,y:D}=at(I,S.current);y(),p.setState({userSelectionRect:{width:0,height:0,startX:v,startY:D,x:v,y:D}}),o==null||o(I)},$=I=>{const{userSelectionRect:y,nodeInternals:_,edges:v,transform:D,onNodesChange:P,onEdgesChange:N,nodeOrigin:H,getNodes:C}=p.getState();if(!e||!S.current||!y)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const L=at(I,S.current),B=y.startX??0,W=y.startY??0,K={...y,x:L.x<B?L.x:B,y:L.y<W?L.y:W,width:Math.abs(L.x-B),height:Math.abs(L.y-W)},ne=C(),G=xi(_,K,D,t===Zt.Partial,!0,H),Y=yi(G,v).map(Q=>Q.id),J=G.map(Q=>Q.id);if(x.current!==J.length){x.current=J.length;const Q=Et(ne,J);Q.length&&(P==null||P(Q))}if(m.current!==Y.length){m.current=Y.length;const Q=Et(v,Y);Q.length&&(N==null||N(Q))}p.setState({userSelectionRect:K})},T=I=>{if(I.button!==0)return;const{userSelectionRect:y}=p.getState();!b&&y&&I.target===h.current&&(M==null||M(I)),p.setState({nodesSelectionActive:x.current>0}),w(),s==null||s(I)},R=I=>{b&&(p.setState({nodesSelectionActive:x.current>0}),s==null||s(I)),w()},F=E&&(e||b);return z.createElement("div",{className:ve(["react-flow__pane",{dragging:A,selection:e}]),onClick:F?void 0:ao(M,h),onContextMenu:ao(k,h),onWheel:ao(j,h),onMouseEnter:F?void 0:l,onMouseDown:F?V:void 0,onMouseMove:F?$:u,onMouseUp:F?T:void 0,onMouseLeave:F?R:c,ref:h,style:rs},d,z.createElement(Nh,null))});zi.displayName="Pane";function Li(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Li(n,t):!1}function tr(e,t,n){let o=e;do{if(o!=null&&o.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Th(e,t,n,o){return Array.from(e.values()).filter(s=>(s.selected||s.id===o)&&(!s.parentNode||!Li(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>{var r,i;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((r=s.positionAbsolute)==null?void 0:r.x)??0),y:n.y-(((i=s.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode,width:s.width,height:s.height,expandParent:s.expandParent}})}function Mh(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Pi(e,t,n,o,s=[0,0],r){const i=Mh(e,e.extent||o);let a=i;if(e.extent==="parent"&&!e.expandParent)if(e.parentNode&&e.width&&e.height){const c=n.get(e.parentNode),{x:d,y:h}=It(c,s).positionAbsolute;a=c&&De(d)&&De(h)&&De(c.width)&&De(c.height)?[[d+e.width*s[0],h+e.height*s[1]],[d+c.width-e.width+e.width*s[0],h+c.height-e.height+e.height*s[1]]]:a}else r==null||r("005",Qe.error005()),a=i;else if(e.extent&&e.parentNode&&e.extent!=="parent"){const c=n.get(e.parentNode),{x:d,y:h}=It(c,s).positionAbsolute;a=[[e.extent[0][0]+d,e.extent[0][1]+h],[e.extent[1][0]+d,e.extent[1][1]+h]]}let l={x:0,y:0};if(e.parentNode){const c=n.get(e.parentNode);l=It(c,s).positionAbsolute}const u=a&&a!=="parent"?qo(t,a):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function lo({nodeId:e,dragItems:t,nodeInternals:n}){const o=t.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?o.find(s=>s.id===e):o[0],o]}const nr=(e,t,n,o)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const r=Array.from(s),i=t.getBoundingClientRect(),a={x:i.width*o[0],y:i.height*o[1]};return r.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-a.x)/n,y:(u.top-i.top-a.y)/n,...Go(l)}})};function Pt(e,t,n){return n===void 0?n:o=>{const s=t().nodeInternals.get(e);s&&n(o,{...s})}}function Mo({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:r,multiSelectionActive:i,nodeInternals:a,onError:l}=t.getState(),u=a.get(e);if(!u){l==null||l("012",Qe.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(r({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var c;return(c=o==null?void 0:o.current)==null?void 0:c.blur()})):s([e])}function Ah(){const e=ge();return g.useCallback(({sourceEvent:n})=>{const{transform:o,snapGrid:s,snapToGrid:r}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(i-o[0])/o[2],y:(a-o[1])/o[2]};return{xSnapped:r?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:r?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function co(e){return(t,n,o)=>e==null?void 0:e(t,o)}function Hi({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:s,isSelectable:r,selectNodesOnDrag:i}){const a=ge(),[l,u]=g.useState(!1),c=g.useRef([]),d=g.useRef({x:null,y:null}),h=g.useRef(0),p=g.useRef(null),x=g.useRef({x:0,y:0}),m=g.useRef(null),S=g.useRef(!1),b=g.useRef(!1),E=Ah();return g.useEffect(()=>{if(e!=null&&e.current){const A=$e(e.current),w=({x:j,y:V})=>{const{nodeInternals:$,onNodeDrag:T,onSelectionDrag:R,updateNodePositions:F,nodeExtent:I,snapGrid:y,snapToGrid:_,nodeOrigin:v,onError:D}=a.getState();d.current={x:j,y:V};let P=!1,N={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&I){const C=ts(c.current,v);N=Ko(C)}if(c.current=c.current.map(C=>{const L={x:j-C.distance.x,y:V-C.distance.y};_&&(L.x=y[0]*Math.round(L.x/y[0]),L.y=y[1]*Math.round(L.y/y[1]));const B=[[I[0][0],I[0][1]],[I[1][0],I[1][1]]];c.current.length>1&&I&&!C.extent&&(B[0][0]=C.positionAbsolute.x-N.x+I[0][0],B[1][0]=C.positionAbsolute.x+(C.width??0)-N.x2+I[1][0],B[0][1]=C.positionAbsolute.y-N.y+I[0][1],B[1][1]=C.positionAbsolute.y+(C.height??0)-N.y2+I[1][1]);const W=Pi(C,L,$,B,v,D);return P=P||C.position.x!==W.position.x||C.position.y!==W.position.y,C.position=W.position,C.positionAbsolute=W.positionAbsolute,C}),!P)return;F(c.current,!0,!0),u(!0);const H=s?T:co(R);if(H&&m.current){const[C,L]=lo({nodeId:s,dragItems:c.current,nodeInternals:$});H(m.current,C,L)}},M=()=>{if(!p.current)return;const[j,V]=li(x.current,p.current);if(j!==0||V!==0){const{transform:$,panBy:T}=a.getState();d.current.x=(d.current.x??0)-j/$[2],d.current.y=(d.current.y??0)-V/$[2],T({x:j,y:V})&&w(d.current)}h.current=requestAnimationFrame(M)},k=j=>{var v;const{nodeInternals:V,multiSelectionActive:$,nodesDraggable:T,unselectNodesAndEdges:R,onNodeDragStart:F,onSelectionDragStart:I}=a.getState();b.current=!0;const y=s?F:co(I);(!i||!r)&&!$&&s&&((v=V.get(s))!=null&&v.selected||R()),s&&r&&i&&Mo({id:s,store:a,nodeRef:e});const _=E(j);if(d.current=_,c.current=Th(V,T,_,s),y&&c.current){const[D,P]=lo({nodeId:s,dragItems:c.current,nodeInternals:V});y(j.sourceEvent,D,P)}};if(t)A.on(".drag",null);else{const j=Pu().on("start",V=>{const{domNode:$,nodeDragThreshold:T}=a.getState();T===0&&k(V);const R=E(V);d.current=R,p.current=($==null?void 0:$.getBoundingClientRect())||null,x.current=at(V.sourceEvent,p.current)}).on("drag",V=>{var F,I;const $=E(V),{autoPanOnNodeDrag:T,nodeDragThreshold:R}=a.getState();if(!S.current&&b.current&&T&&(S.current=!0,M()),!b.current){const y=$.xSnapped-(((F=d==null?void 0:d.current)==null?void 0:F.x)??0),_=$.ySnapped-(((I=d==null?void 0:d.current)==null?void 0:I.y)??0);Math.sqrt(y*y+_*_)>R&&k(V)}(d.current.x!==$.xSnapped||d.current.y!==$.ySnapped)&&c.current&&b.current&&(m.current=V.sourceEvent,x.current=at(V.sourceEvent,p.current),w($))}).on("end",V=>{if(b.current&&(u(!1),S.current=!1,b.current=!1,cancelAnimationFrame(h.current),c.current)){const{updateNodePositions:$,nodeInternals:T,onNodeDragStop:R,onSelectionDragStop:F}=a.getState(),I=s?R:co(F);if($(c.current,!1,!1),I){const[y,_]=lo({nodeId:s,dragItems:c.current,nodeInternals:T});I(V.sourceEvent,y,_)}}}).filter(V=>{const $=V.target;return!V.button&&(!n||!tr($,`.${n}`,e))&&(!o||tr($,o,e))});return A.call(j),()=>{A.on(".drag",null)}}}},[e,t,n,o,r,a,s,i,E]),l}function Fi(){const e=ge();return g.useCallback(n=>{const{nodeInternals:o,nodeExtent:s,updateNodePositions:r,getNodes:i,snapToGrid:a,snapGrid:l,onError:u,nodesDraggable:c}=e.getState(),d=i().filter(E=>E.selected&&(E.draggable||c&&typeof E.draggable>"u")),h=a?l[0]:5,p=a?l[1]:5,x=n.isShiftPressed?4:1,m=n.x*h*x,S=n.y*p*x,b=d.map(E=>{if(E.positionAbsolute){const A={x:E.positionAbsolute.x+m,y:E.positionAbsolute.y+S};a&&(A.x=l[0]*Math.round(A.x/l[0]),A.y=l[1]*Math.round(A.y/l[1]));const{positionAbsolute:w,position:M}=Pi(E,A,o,s,void 0,u);E.position=M,E.positionAbsolute=w}return E});r(b,!0,!1)},[])}const kt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ht=e=>{const t=({id:n,type:o,data:s,xPos:r,yPos:i,xPosOrigin:a,yPosOrigin:l,selected:u,onClick:c,onMouseEnter:d,onMouseMove:h,onMouseLeave:p,onContextMenu:x,onDoubleClick:m,style:S,className:b,isDraggable:E,isSelectable:A,isConnectable:w,isFocusable:M,selectNodesOnDrag:k,sourcePosition:j,targetPosition:V,hidden:$,resizeObserver:T,dragHandle:R,zIndex:F,isParent:I,noDragClassName:y,noPanClassName:_,initialized:v,disableKeyboardA11y:D,ariaLabel:P,rfId:N,hasHandleBounds:H})=>{const C=ge(),L=g.useRef(null),B=g.useRef(j),W=g.useRef(V),K=g.useRef(o),ne=A||E||c||d||h||p,G=Fi(),Y=Pt(n,C.getState,d),J=Pt(n,C.getState,h),Q=Pt(n,C.getState,p),le=Pt(n,C.getState,x),Ne=Pt(n,C.getState,m),ke=ie=>{const{nodeDragThreshold:xe}=C.getState();if(A&&(!k||!E||xe>0)&&Mo({id:n,store:C,nodeRef:L}),c){const q=C.getState().nodeInternals.get(n);q&&c(ie,{...q})}},de=ie=>{if(!Co(ie))if(ui.includes(ie.key)&&A){const xe=ie.key==="Escape";Mo({id:n,store:C,unselect:xe,nodeRef:L})}else!D&&E&&u&&Object.prototype.hasOwnProperty.call(kt,ie.key)&&(C.setState({ariaLiveMessage:`Moved selected node ${ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~r}, y: ${~~i}`}),G({x:kt[ie.key].x,y:kt[ie.key].y,isShiftPressed:ie.shiftKey}))};g.useEffect(()=>()=>{L.current&&(T==null||T.unobserve(L.current))},[]),g.useEffect(()=>{if(L.current&&!$){const ie=L.current;(!v||!H)&&(T==null||T.unobserve(ie),T==null||T.observe(ie))}},[$,v,H]),g.useEffect(()=>{const ie=K.current!==o,xe=B.current!==j,q=W.current!==V;L.current&&(ie||xe||q)&&(ie&&(K.current=o),xe&&(B.current=j),q&&(W.current=V),C.getState().updateNodeDimensions([{id:n,nodeElement:L.current,forceUpdate:!0}]))},[n,o,j,V]);const Te=Hi({nodeRef:L,disabled:$||!E,noDragClassName:y,handleSelector:R,nodeId:n,isSelectable:A,selectNodesOnDrag:k});return $?null:z.createElement("div",{className:ve(["react-flow__node",`react-flow__node-${o}`,{[_]:E},b,{selected:u,selectable:A,parent:I,dragging:Te}]),ref:L,style:{zIndex:F,transform:`translate(${a}px,${l}px)`,pointerEvents:ne?"all":"none",visibility:v?"visible":"hidden",...S},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Y,onMouseMove:J,onMouseLeave:Q,onContextMenu:le,onClick:ke,onDoubleClick:Ne,onKeyDown:M?de:void 0,tabIndex:M?0:void 0,role:M?"button":void 0,"aria-describedby":D?void 0:`${Mi}-${N}`,"aria-label":P},z.createElement(Xf,{value:n},z.createElement(e,{id:n,data:s,type:o,xPos:r,yPos:i,selected:u,isConnectable:w,sourcePosition:j,targetPosition:V,dragging:Te,dragHandle:R,zIndex:F})))};return t.displayName="NodeWrapper",g.memo(t)};const Dh=e=>{const t=e.getNodes().filter(n=>n.selected);return{...ts(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function $h({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=ge(),{width:s,height:r,x:i,y:a,transformString:l,userSelectionActive:u}=ce(Dh,ye),c=Fi(),d=g.useRef(null);if(g.useEffect(()=>{var x;n||(x=d.current)==null||x.focus({preventScroll:!0})},[n]),Hi({nodeRef:d}),u||!s||!r)return null;const h=e?x=>{const m=o.getState().getNodes().filter(S=>S.selected);e(x,m)}:void 0,p=x=>{Object.prototype.hasOwnProperty.call(kt,x.key)&&c({x:kt[x.key].x,y:kt[x.key].y,isShiftPressed:x.shiftKey})};return z.createElement("div",{className:ve(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},z.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:s,height:r,top:a,left:i}}))}var Rh=g.memo($h);const jh=e=>e.nodesSelectionActive,Oi=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:r,onPaneScroll:i,deleteKeyCode:a,onMove:l,onMoveStart:u,onMoveEnd:c,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:x,onSelectionEnd:m,multiSelectionKeyCode:S,panActivationKeyCode:b,zoomActivationKeyCode:E,elementsSelectable:A,zoomOnScroll:w,zoomOnPinch:M,panOnScroll:k,panOnScrollSpeed:j,panOnScrollMode:V,zoomOnDoubleClick:$,panOnDrag:T,defaultViewport:R,translateExtent:F,minZoom:I,maxZoom:y,preventScrolling:_,onSelectionContextMenu:v,noWheelClassName:D,noPanClassName:P,disableKeyboardA11y:N})=>{const H=ce(jh),C=Jt(d),L=Jt(b),B=L||T,W=L||k,K=C||h&&B!==!0;return wh({deleteKeyCode:a,multiSelectionKeyCode:S}),z.createElement(Eh,{onMove:l,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:r,elementsSelectable:A,zoomOnScroll:w,zoomOnPinch:M,panOnScroll:W,panOnScrollSpeed:j,panOnScrollMode:V,zoomOnDoubleClick:$,panOnDrag:!C&&B,defaultViewport:R,translateExtent:F,minZoom:I,maxZoom:y,zoomActivationKeyCode:E,preventScrolling:_,noWheelClassName:D,noPanClassName:P},z.createElement(zi,{onSelectionStart:x,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:r,onPaneScroll:i,panOnDrag:B,isSelecting:!!K,selectionMode:p},e,H&&z.createElement(Rh,{onSelectionContextMenu:v,noPanClassName:P,disableKeyboardA11y:N})))};Oi.displayName="FlowRenderer";var Vh=g.memo(Oi);function zh(e){return ce(g.useCallback(n=>e?xi(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Lh(e){const t={input:Ht(e.input||Ni),default:Ht(e.default||To),output:Ht(e.output||ki),group:Ht(e.group||os)},n={},o=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,r)=>(s[r]=Ht(e[r]||To),s),n);return{...t,...o}}const Ph=({x:e,y:t,width:n,height:o,origin:s})=>!n||!o?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-n*s[0],y:t-o*s[1]},Hh=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Bi=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:s,updateNodeDimensions:r,onError:i}=ce(Hh,ye),a=zh(e.onlyRenderVisibleElements),l=g.useRef(),u=g.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(d=>{const h=d.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));r(h)});return l.current=c,c},[]);return g.useEffect(()=>()=>{var c;(c=l==null?void 0:l.current)==null||c.disconnect()},[]),z.createElement("div",{className:"react-flow__nodes",style:rs},a.map(c=>{var M,k,j;let d=c.type||"default";e.nodeTypes[d]||(i==null||i("003",Qe.error003(d)),d="default");const h=e.nodeTypes[d]||e.nodeTypes.default,p=!!(c.draggable||t&&typeof c.draggable>"u"),x=!!(c.selectable||s&&typeof c.selectable>"u"),m=!!(c.connectable||n&&typeof c.connectable>"u"),S=!!(c.focusable||o&&typeof c.focusable>"u"),b=e.nodeExtent?qo(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,E=(b==null?void 0:b.x)??0,A=(b==null?void 0:b.y)??0,w=Ph({x:E,y:A,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return z.createElement(h,{key:c.id,id:c.id,className:c.className,style:c.style,type:d,data:c.data,sourcePosition:c.sourcePosition||U.Bottom,targetPosition:c.targetPosition||U.Top,hidden:c.hidden,xPos:E,yPos:A,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:p,isSelectable:x,isConnectable:m,isFocusable:S,resizeObserver:u,dragHandle:c.dragHandle,zIndex:((M=c[pe])==null?void 0:M.z)??0,isParent:!!((k=c[pe])!=null&&k.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel,hasHandleBounds:!!((j=c[pe])!=null&&j.handleBounds)})}))};Bi.displayName="NodeRenderer";var Fh=g.memo(Bi);const Oh=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,Bh=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,or="react-flow__edgeupdater",sr=({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:s,onMouseEnter:r,onMouseOut:i,type:a})=>z.createElement("circle",{onMouseDown:s,onMouseEnter:r,onMouseOut:i,className:ve([or,`${or}-${a}`]),cx:Oh(t,o,e),cy:Bh(n,o,e),r:o,stroke:"transparent",fill:"transparent"}),Wh=()=>!0;var _t=e=>{const t=({id:n,className:o,type:s,data:r,onClick:i,onEdgeDoubleClick:a,selected:l,animated:u,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:m,style:S,source:b,target:E,sourceX:A,sourceY:w,targetX:M,targetY:k,sourcePosition:j,targetPosition:V,elementsSelectable:$,hidden:T,sourceHandleId:R,targetHandleId:F,onContextMenu:I,onMouseEnter:y,onMouseMove:_,onMouseLeave:v,edgeUpdaterRadius:D,onEdgeUpdate:P,onEdgeUpdateStart:N,onEdgeUpdateEnd:H,markerEnd:C,markerStart:L,rfId:B,ariaLabel:W,isFocusable:K,isUpdatable:ne,pathOptions:G,interactionWidth:Y})=>{const J=g.useRef(null),[Q,le]=g.useState(!1),[Ne,ke]=g.useState(!1),de=ge(),Te=g.useMemo(()=>`url('#${Io(L,B)}')`,[L,B]),ie=g.useMemo(()=>`url('#${Io(C,B)}')`,[C,B]);if(T)return null;const xe=X=>{var he;const{edges:oe,addSelectedEdges:ee,unselectNodesAndEdges:ae,multiSelectionActive:fe}=de.getState(),re=oe.find(Me=>Me.id===n);re&&($&&(de.setState({nodesSelectionActive:!1}),re.selected&&fe?(ae({nodes:[],edges:[re]}),(he=J.current)==null||he.blur()):ee([n])),i&&i(X,re))},q=Lt(n,de.getState,a),Ye=Lt(n,de.getState,I),Le=Lt(n,de.getState,y),Ue=Lt(n,de.getState,_),et=Lt(n,de.getState,v),Ge=(X,oe)=>{if(X.button!==0)return;const{edges:ee,isValidConnection:ae}=de.getState(),fe=oe?E:b,re=(oe?F:R)||null,he=oe?"target":"source",Me=ae||Wh,Se=oe,ue=ee.find(ft=>ft.id===n);ke(!0),N==null||N(X,ue,he);const Ae=ft=>{ke(!1),H==null||H(ft,ue,he)};Si({event:X,handleId:re,nodeId:fe,onConnect:ft=>P==null?void 0:P(ue,ft),isTarget:Se,getState:de.getState,setState:de.setState,isValidConnection:Me,edgeUpdaterType:he,onEdgeUpdateEnd:Ae})},Pe=X=>Ge(X,!0),tt=X=>Ge(X,!1),He=()=>le(!0),Fe=()=>le(!1),ut=!$&&!i,O=X=>{var oe;if(ui.includes(X.key)&&$){const{unselectNodesAndEdges:ee,addSelectedEdges:ae,edges:fe}=de.getState();X.key==="Escape"?((oe=J.current)==null||oe.blur(),ee({edges:[fe.find(he=>he.id===n)]})):ae([n])}};return z.createElement("g",{className:ve(["react-flow__edge",`react-flow__edge-${s}`,o,{selected:l,animated:u,inactive:ut,updating:Q}]),onClick:xe,onDoubleClick:q,onContextMenu:Ye,onMouseEnter:Le,onMouseMove:Ue,onMouseLeave:et,onKeyDown:K?O:void 0,tabIndex:K?0:void 0,role:K?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":W===null?void 0:W||`Edge from ${b} to ${E}`,"aria-describedby":K?`${Ai}-${B}`:void 0,ref:J},!Ne&&z.createElement(e,{id:n,source:b,target:E,selected:l,animated:u,label:c,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:m,data:r,style:S,sourceX:A,sourceY:w,targetX:M,targetY:k,sourcePosition:j,targetPosition:V,sourceHandleId:R,targetHandleId:F,markerStart:Te,markerEnd:ie,pathOptions:G,interactionWidth:Y}),ne&&z.createElement(z.Fragment,null,(ne==="source"||ne===!0)&&z.createElement(sr,{position:j,centerX:A,centerY:w,radius:D,onMouseDown:Pe,onMouseEnter:He,onMouseOut:Fe,type:"source"}),(ne==="target"||ne===!0)&&z.createElement(sr,{position:V,centerX:M,centerY:k,radius:D,onMouseDown:tt,onMouseEnter:He,onMouseOut:Fe,type:"target"})))};return t.displayName="EdgeWrapper",g.memo(t)};function Xh(e){const t={default:_t(e.default||Mn),straight:_t(e.bezier||Qo),step:_t(e.step||Jo),smoothstep:_t(e.step||On),simplebezier:_t(e.simplebezier||Zo)},n={},o=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,r)=>(s[r]=_t(e[r]||Mn),s),n);return{...t,...o}}function rr(e,t,n=null){const o=((n==null?void 0:n.x)||0)+t.x,s=((n==null?void 0:n.y)||0)+t.y,r=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case U.Top:return{x:o+r/2,y:s};case U.Right:return{x:o+r,y:s+i/2};case U.Bottom:return{x:o+r/2,y:s+i};case U.Left:return{x:o,y:s+i/2}}}function ir(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Yh=(e,t,n,o,s,r)=>{const i=rr(n,e,t),a=rr(r,o,s);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}};function Uh({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:s,targetHeight:r,width:i,height:a,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+s),y2:Math.max(e.y+o,t.y+r)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Ko({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:a/l[2]}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),h=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*h)>0}function ar(e){var o,s,r,i,a;const t=((o=e==null?void 0:e[pe])==null?void 0:o.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Gh=[{level:0,isMaxLevel:!0,edges:[]}];function qh(e,t,n=!1){let o=-1;const s=e.reduce((i,a)=>{var c,d;const l=De(a.zIndex);let u=l?a.zIndex:0;if(n){const h=t.get(a.target),p=t.get(a.source),x=a.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),m=Math.max(((c=p==null?void 0:p[pe])==null?void 0:c.z)||0,((d=h==null?void 0:h[pe])==null?void 0:d.z)||0,1e3);u=(l?a.zIndex:0)+(x?m:0)}return i[u]?i[u].push(a):i[u]=[a],o=u>o?u:o,i},{}),r=Object.entries(s).map(([i,a])=>{const l=+i;return{edges:a,level:l,isMaxLevel:l===o}});return r.length===0?Gh:r}function Kh(e,t,n){const o=ce(g.useCallback(s=>e?s.edges.filter(r=>{const i=t.get(r.source),a=t.get(r.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Uh({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:a.width,targetHeight:a.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return qh(o,t,n)}const Zh=({color:e="none",strokeWidth:t=1})=>z.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Jh=({color:e="none",strokeWidth:t=1})=>z.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),lr={[Tn.Arrow]:Zh,[Tn.ArrowClosed]:Jh};function Qh(e){const t=ge();return g.useMemo(()=>{var s,r;return Object.prototype.hasOwnProperty.call(lr,e)?lr[e]:((r=(s=t.getState()).onError)==null||r.call(s,"009",Qe.error009(e)),null)},[e])}const ep=({id:e,type:t,color:n,width:o=12.5,height:s=12.5,markerUnits:r="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const l=Qh(t);return l?z.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:r,orient:a,refX:"0",refY:"0"},z.createElement(l,{color:n,strokeWidth:i})):null},tp=({defaultColor:e,rfId:t})=>n=>{const o=[];return n.edges.reduce((s,r)=>([r.markerStart,r.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const a=Io(i,t);o.includes(a)||(s.push({id:a,color:i.color||e,...i}),o.push(a))}}),s),[]).sort((s,r)=>s.id.localeCompare(r.id))},Wi=({defaultColor:e,rfId:t})=>{const n=ce(g.useCallback(tp({defaultColor:e,rfId:t}),[e,t]),(o,s)=>!(o.length!==s.length||o.some((r,i)=>r.id!==s[i].id)));return z.createElement("defs",null,n.map(o=>z.createElement(ep,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};Wi.displayName="MarkerDefinitions";var np=g.memo(Wi);const op=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Xi=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:s,noPanClassName:r,onEdgeUpdate:i,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:d,edgeUpdaterRadius:h,onEdgeDoubleClick:p,onEdgeUpdateStart:x,onEdgeUpdateEnd:m,children:S})=>{const{edgesFocusable:b,edgesUpdatable:E,elementsSelectable:A,width:w,height:M,connectionMode:k,nodeInternals:j,onError:V}=ce(op,ye),$=Kh(t,j,n);return w?z.createElement(z.Fragment,null,$.map(({level:T,edges:R,isMaxLevel:F})=>z.createElement("svg",{key:T,style:{zIndex:T},width:w,height:M,className:"react-flow__edges react-flow__container"},F&&z.createElement(np,{defaultColor:e,rfId:o}),z.createElement("g",null,R.map(I=>{const[y,_,v]=ar(j.get(I.source)),[D,P,N]=ar(j.get(I.target));if(!v||!N)return null;let H=I.type||"default";s[H]||(V==null||V("011",Qe.error011(H)),H="default");const C=s[H]||s.default,L=k===bt.Strict?P.target:(P.target??[]).concat(P.source??[]),B=ir(_.source,I.sourceHandle),W=ir(L,I.targetHandle),K=(B==null?void 0:B.position)||U.Bottom,ne=(W==null?void 0:W.position)||U.Top,G=!!(I.focusable||b&&typeof I.focusable>"u"),Y=typeof i<"u"&&(I.updatable||E&&typeof I.updatable>"u");if(!B||!W)return V==null||V("008",Qe.error008(B,I)),null;const{sourceX:J,sourceY:Q,targetX:le,targetY:Ne}=Yh(y,B,K,D,W,ne);return z.createElement(C,{key:I.id,id:I.id,className:ve([I.className,r]),type:H,data:I.data,selected:!!I.selected,animated:!!I.animated,hidden:!!I.hidden,label:I.label,labelStyle:I.labelStyle,labelShowBg:I.labelShowBg,labelBgStyle:I.labelBgStyle,labelBgPadding:I.labelBgPadding,labelBgBorderRadius:I.labelBgBorderRadius,style:I.style,source:I.source,target:I.target,sourceHandleId:I.sourceHandle,targetHandleId:I.targetHandle,markerEnd:I.markerEnd,markerStart:I.markerStart,sourceX:J,sourceY:Q,targetX:le,targetY:Ne,sourcePosition:K,targetPosition:ne,elementsSelectable:A,onEdgeUpdate:i,onContextMenu:a,onMouseEnter:l,onMouseMove:u,onMouseLeave:c,onClick:d,edgeUpdaterRadius:h,onEdgeDoubleClick:p,onEdgeUpdateStart:x,onEdgeUpdateEnd:m,rfId:o,ariaLabel:I.ariaLabel,isFocusable:G,isUpdatable:Y,pathOptions:"pathOptions"in I?I.pathOptions:void 0,interactionWidth:I.interactionWidth})})))),S):null};Xi.displayName="EdgeRenderer";var sp=g.memo(Xi);const rp=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function ip({children:e}){const t=ce(rp);return z.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function ap(e){const t=ss(),n=g.useRef(!1);g.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const lp={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top},Yi=({nodeId:e,handleType:t,style:n,type:o=rt.Bezier,CustomComponent:s,connectionStatus:r})=>{var k,j,V;const{fromNode:i,handleId:a,toX:l,toY:u,connectionMode:c}=ce(g.useCallback($=>({fromNode:$.nodeInternals.get(e),handleId:$.connectionHandleId,toX:($.connectionPosition.x-$.transform[0])/$.transform[2],toY:($.connectionPosition.y-$.transform[1])/$.transform[2],connectionMode:$.connectionMode}),[e]),ye),d=(k=i==null?void 0:i[pe])==null?void 0:k.handleBounds;let h=d==null?void 0:d[t];if(c===bt.Loose&&(h=h||(d==null?void 0:d[t==="source"?"target":"source"])),!i||!h)return null;const p=a?h.find($=>$.id===a):h[0],x=p?p.x+p.width/2:(i.width??0)/2,m=p?p.y+p.height/2:i.height??0,S=(((j=i.positionAbsolute)==null?void 0:j.x)??0)+x,b=(((V=i.positionAbsolute)==null?void 0:V.y)??0)+m,E=p==null?void 0:p.position,A=E?lp[E]:null;if(!E||!A)return null;if(s)return z.createElement(s,{connectionLineType:o,connectionLineStyle:n,fromNode:i,fromHandle:p,fromX:S,fromY:b,toX:l,toY:u,fromPosition:E,toPosition:A,connectionStatus:r});let w="";const M={sourceX:S,sourceY:b,sourcePosition:E,targetX:l,targetY:u,targetPosition:A};return o===rt.Bezier?[w]=gi(M):o===rt.Step?[w]=No({...M,borderRadius:0}):o===rt.SmoothStep?[w]=No(M):o===rt.SimpleBezier?[w]=pi(M):w=`M${S},${b} ${l},${u}`,z.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})};Yi.displayName="ConnectionLine";const cp=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function up({containerStyle:e,style:t,type:n,component:o}){const{nodeId:s,handleType:r,nodesConnectable:i,width:a,height:l,connectionStatus:u}=ce(cp,ye);return!(s&&r&&a&&i)?null:z.createElement("svg",{style:e,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},z.createElement("g",{className:ve(["react-flow__connection",u])},z.createElement(Yi,{nodeId:s,handleType:r,style:t,type:n,CustomComponent:o,connectionStatus:u})))}function cr(e,t){return g.useRef(null),ge(),g.useMemo(()=>t(e),[e])}const Ui=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:s,onInit:r,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:x,onSelectionStart:m,onSelectionEnd:S,connectionLineType:b,connectionLineStyle:E,connectionLineComponent:A,connectionLineContainerStyle:w,selectionKeyCode:M,selectionOnDrag:k,selectionMode:j,multiSelectionKeyCode:V,panActivationKeyCode:$,zoomActivationKeyCode:T,deleteKeyCode:R,onlyRenderVisibleElements:F,elementsSelectable:I,selectNodesOnDrag:y,defaultViewport:_,translateExtent:v,minZoom:D,maxZoom:P,preventScrolling:N,defaultMarkerColor:H,zoomOnScroll:C,zoomOnPinch:L,panOnScroll:B,panOnScrollSpeed:W,panOnScrollMode:K,zoomOnDoubleClick:ne,panOnDrag:G,onPaneClick:Y,onPaneMouseEnter:J,onPaneMouseMove:Q,onPaneMouseLeave:le,onPaneScroll:Ne,onPaneContextMenu:ke,onEdgeUpdate:de,onEdgeContextMenu:Te,onEdgeMouseEnter:ie,onEdgeMouseMove:xe,onEdgeMouseLeave:q,edgeUpdaterRadius:Ye,onEdgeUpdateStart:Le,onEdgeUpdateEnd:Ue,noDragClassName:et,noWheelClassName:Ge,noPanClassName:Pe,elevateEdgesOnSelect:tt,disableKeyboardA11y:He,nodeOrigin:Fe,nodeExtent:ut,rfId:O})=>{const X=cr(e,Lh),oe=cr(t,Xh);return ap(r),z.createElement(Vh,{onPaneClick:Y,onPaneMouseEnter:J,onPaneMouseMove:Q,onPaneMouseLeave:le,onPaneContextMenu:ke,onPaneScroll:Ne,deleteKeyCode:R,selectionKeyCode:M,selectionOnDrag:k,selectionMode:j,onSelectionStart:m,onSelectionEnd:S,multiSelectionKeyCode:V,panActivationKeyCode:$,zoomActivationKeyCode:T,elementsSelectable:I,onMove:n,onMoveStart:o,onMoveEnd:s,zoomOnScroll:C,zoomOnPinch:L,zoomOnDoubleClick:ne,panOnScroll:B,panOnScrollSpeed:W,panOnScrollMode:K,panOnDrag:G,defaultViewport:_,translateExtent:v,minZoom:D,maxZoom:P,onSelectionContextMenu:x,preventScrolling:N,noDragClassName:et,noWheelClassName:Ge,noPanClassName:Pe,disableKeyboardA11y:He},z.createElement(ip,null,z.createElement(sp,{edgeTypes:oe,onEdgeClick:a,onEdgeDoubleClick:u,onEdgeUpdate:de,onlyRenderVisibleElements:F,onEdgeContextMenu:Te,onEdgeMouseEnter:ie,onEdgeMouseMove:xe,onEdgeMouseLeave:q,onEdgeUpdateStart:Le,onEdgeUpdateEnd:Ue,edgeUpdaterRadius:Ye,defaultMarkerColor:H,noPanClassName:Pe,elevateEdgesOnSelect:!!tt,disableKeyboardA11y:He,rfId:O},z.createElement(up,{style:E,type:b,component:A,containerStyle:w})),z.createElement("div",{className:"react-flow__edgelabel-renderer"}),z.createElement(Fh,{nodeTypes:X,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:y,onlyRenderVisibleElements:F,noPanClassName:Pe,noDragClassName:et,disableKeyboardA11y:He,nodeOrigin:Fe,nodeExtent:ut,rfId:O})))};Ui.displayName="GraphView";var dp=g.memo(Ui);const Ao=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ao,nodeExtent:Ao,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:bt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Pf,isValidConnection:void 0},fp=()=>Zl((e,t)=>({...nt,setNodes:n=>{const{nodeInternals:o,nodeOrigin:s,elevateNodesOnSelect:r}=t();e({nodeInternals:io(n,o,s,r)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=t();e({edges:n.map(s=>({...o,...s}))})},setDefaultNodesAndEdges:(n,o)=>{const s=typeof n<"u",r=typeof o<"u",i=s?io(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:r?o:[],hasDefaultNodes:s,hasDefaultEdges:r})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:s,fitViewOnInit:r,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:l,nodeOrigin:u}=t(),c=l==null?void 0:l.querySelector(".react-flow__viewport");if(!c)return;const d=window.getComputedStyle(c),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=n.reduce((m,S)=>{const b=s.get(S.id);if(b){const E=Go(S.nodeElement);!!(E.width&&E.height&&(b.width!==E.width||b.height!==E.height||S.forceUpdate))&&(s.set(b.id,{...b,[pe]:{...b[pe],handleBounds:{source:nr(".source",S.nodeElement,h,u),target:nr(".target",S.nodeElement,h,u)}},...E}),m.push({id:b.id,type:"dimensions",dimensions:E}))}return m},[]);$i(s,u);const x=i||r&&!i&&Ri(t,{initial:!0,...a});e({nodeInternals:new Map(s),fitViewOnInitDone:x}),(p==null?void 0:p.length)>0&&(o==null||o(p))},updateNodePositions:(n,o=!0,s=!1)=>{const{triggerNodeChanges:r}=t(),i=n.map(a=>{const l={id:a.id,type:"position",dragging:s};return o&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});r(i)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:s,hasDefaultNodes:r,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(r){const u=Vi(n,a()),c=io(u,s,i,l);e({nodeInternals:c})}o==null||o(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:s,getNodes:r}=t();let i,a=null;o?i=n.map(l=>st(l,!0)):(i=Et(r(),n),a=Et(s,[])),dn({changedNodes:i,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:s,getNodes:r}=t();let i,a=null;o?i=n.map(l=>st(l,!0)):(i=Et(s,n),a=Et(r(),[])),dn({changedNodes:a,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:s,getNodes:r}=t(),i=n||r(),a=o||s,l=i.map(c=>(c.selected=!1,st(c.id,!1))),u=a.map(c=>st(c.id,!1));dn({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:s}=t();o==null||o.scaleExtent([n,s]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:s}=t();o==null||o.scaleExtent([s,n]),e({maxZoom:n})},setTranslateExtent:n=>{var o;(o=t().d3Zoom)==null||o.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=t(),r=o().filter(a=>a.selected).map(a=>st(a.id,!1)),i=n.filter(a=>a.selected).map(a=>st(a.id,!1));dn({changedNodes:r,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:o}=t();o.forEach(s=>{s.positionAbsolute=qo(s.position,n)}),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:s,height:r,d3Zoom:i,d3Selection:a,translateExtent:l}=t();if(!i||!a||!n.x&&!n.y)return!1;const u=it.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),c=[[0,0],[s,r]],d=i==null?void 0:i.constrain()(u,c,l);return i.transform(a,d),o[0]!==d.x||o[1]!==d.y||o[2]!==d.k},cancelConnection:()=>e({connectionNodeId:nt.connectionNodeId,connectionHandleId:nt.connectionHandleId,connectionHandleType:nt.connectionHandleType,connectionStatus:nt.connectionStatus,connectionStartHandle:nt.connectionStartHandle,connectionEndHandle:nt.connectionEndHandle}),reset:()=>e({...nt})}),Object.is),Gi=({children:e})=>{const t=g.useRef(null);return t.current||(t.current=fp()),z.createElement(Af,{value:t.current},e)};Gi.displayName="ReactFlowProvider";const qi=({children:e})=>g.useContext(Fn)?z.createElement(z.Fragment,null,e):z.createElement(Gi,null,e);qi.displayName="ReactFlowWrapper";const hp={input:Ni,default:To,output:ki,group:os},pp={default:Mn,straight:Qo,step:Jo,smoothstep:On,simplebezier:Zo},gp=[0,0],mp=[15,15],xp={x:0,y:0,zoom:1},yp={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},bp=g.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:s,nodeTypes:r=hp,edgeTypes:i=pp,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:d,onMoveEnd:h,onConnect:p,onConnectStart:x,onConnectEnd:m,onClickConnectStart:S,onClickConnectEnd:b,onNodeMouseEnter:E,onNodeMouseMove:A,onNodeMouseLeave:w,onNodeContextMenu:M,onNodeDoubleClick:k,onNodeDragStart:j,onNodeDrag:V,onNodeDragStop:$,onNodesDelete:T,onEdgesDelete:R,onSelectionChange:F,onSelectionDragStart:I,onSelectionDrag:y,onSelectionDragStop:_,onSelectionContextMenu:v,onSelectionStart:D,onSelectionEnd:P,connectionMode:N=bt.Strict,connectionLineType:H=rt.Bezier,connectionLineStyle:C,connectionLineComponent:L,connectionLineContainerStyle:B,deleteKeyCode:W="Backspace",selectionKeyCode:K="Shift",selectionOnDrag:ne=!1,selectionMode:G=Zt.Full,panActivationKeyCode:Y="Space",multiSelectionKeyCode:J=kn()?"Meta":"Control",zoomActivationKeyCode:Q=kn()?"Meta":"Control",snapToGrid:le=!1,snapGrid:Ne=mp,onlyRenderVisibleElements:ke=!1,selectNodesOnDrag:de=!0,nodesDraggable:Te,nodesConnectable:ie,nodesFocusable:xe,nodeOrigin:q=gp,edgesFocusable:Ye,edgesUpdatable:Le,elementsSelectable:Ue,defaultViewport:et=xp,minZoom:Ge=.5,maxZoom:Pe=2,translateExtent:tt=Ao,preventScrolling:He=!0,nodeExtent:Fe,defaultMarkerColor:ut="#b1b1b7",zoomOnScroll:O=!0,zoomOnPinch:X=!0,panOnScroll:oe=!1,panOnScrollSpeed:ee=.5,panOnScrollMode:ae=mt.Free,zoomOnDoubleClick:fe=!0,panOnDrag:re=!0,onPaneClick:he,onPaneMouseEnter:Me,onPaneMouseMove:Se,onPaneMouseLeave:ue,onPaneScroll:Ae,onPaneContextMenu:dt,children:ft,onEdgeUpdate:va,onEdgeContextMenu:Sa,onEdgeDoubleClick:_a,onEdgeMouseEnter:Ea,onEdgeMouseMove:Ca,onEdgeMouseLeave:Na,onEdgeUpdateStart:Ia,onEdgeUpdateEnd:ka,edgeUpdaterRadius:Ta=10,onNodesChange:Ma,onEdgesChange:Aa,noDragClassName:Da="nodrag",noWheelClassName:$a="nowheel",noPanClassName:fs="nopan",fitView:Ra=!1,fitViewOptions:ja,connectOnClick:Va=!0,attributionPosition:za,proOptions:La,defaultEdgeOptions:Pa,elevateNodesOnSelect:Ha=!0,elevateEdgesOnSelect:Fa=!1,disableKeyboardA11y:hs=!1,autoPanOnConnect:Oa=!0,autoPanOnNodeDrag:Ba=!0,connectionRadius:Wa=20,isValidConnection:Xa,onError:Ya,style:Ua,id:ps,nodeDragThreshold:Ga,...qa},Ka)=>{const Yn=ps||"1";return z.createElement("div",{...qa,style:{...Ua,...yp},ref:Ka,className:ve(["react-flow",s]),"data-testid":"rf__wrapper",id:ps},z.createElement(qi,null,z.createElement(dp,{onInit:u,onMove:c,onMoveStart:d,onMoveEnd:h,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:E,onNodeMouseMove:A,onNodeMouseLeave:w,onNodeContextMenu:M,onNodeDoubleClick:k,nodeTypes:r,edgeTypes:i,connectionLineType:H,connectionLineStyle:C,connectionLineComponent:L,connectionLineContainerStyle:B,selectionKeyCode:K,selectionOnDrag:ne,selectionMode:G,deleteKeyCode:W,multiSelectionKeyCode:J,panActivationKeyCode:Y,zoomActivationKeyCode:Q,onlyRenderVisibleElements:ke,selectNodesOnDrag:de,defaultViewport:et,translateExtent:tt,minZoom:Ge,maxZoom:Pe,preventScrolling:He,zoomOnScroll:O,zoomOnPinch:X,zoomOnDoubleClick:fe,panOnScroll:oe,panOnScrollSpeed:ee,panOnScrollMode:ae,panOnDrag:re,onPaneClick:he,onPaneMouseEnter:Me,onPaneMouseMove:Se,onPaneMouseLeave:ue,onPaneScroll:Ae,onPaneContextMenu:dt,onSelectionContextMenu:v,onSelectionStart:D,onSelectionEnd:P,onEdgeUpdate:va,onEdgeContextMenu:Sa,onEdgeDoubleClick:_a,onEdgeMouseEnter:Ea,onEdgeMouseMove:Ca,onEdgeMouseLeave:Na,onEdgeUpdateStart:Ia,onEdgeUpdateEnd:ka,edgeUpdaterRadius:Ta,defaultMarkerColor:ut,noDragClassName:Da,noWheelClassName:$a,noPanClassName:fs,elevateEdgesOnSelect:Fa,rfId:Yn,disableKeyboardA11y:hs,nodeOrigin:q,nodeExtent:Fe}),z.createElement(lh,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:p,onConnectStart:x,onConnectEnd:m,onClickConnectStart:S,onClickConnectEnd:b,nodesDraggable:Te,nodesConnectable:ie,nodesFocusable:xe,edgesFocusable:Ye,edgesUpdatable:Le,elementsSelectable:Ue,elevateNodesOnSelect:Ha,minZoom:Ge,maxZoom:Pe,nodeExtent:Fe,onNodesChange:Ma,onEdgesChange:Aa,snapToGrid:le,snapGrid:Ne,connectionMode:N,translateExtent:tt,connectOnClick:Va,defaultEdgeOptions:Pa,fitView:Ra,fitViewOptions:ja,onNodesDelete:T,onEdgesDelete:R,onNodeDragStart:j,onNodeDrag:V,onNodeDragStop:$,onSelectionDrag:y,onSelectionDragStart:I,onSelectionDragStop:_,noPanClassName:fs,nodeOrigin:q,rfId:Yn,autoPanOnConnect:Oa,autoPanOnNodeDrag:Ba,onError:Ya,connectionRadius:Wa,isValidConnection:Xa,nodeDragThreshold:Ga}),z.createElement(ih,{onSelectionChange:F}),ft,z.createElement($f,{proOptions:La,position:za}),z.createElement(hh,{rfId:Yn,disableKeyboardA11y:hs})))});bp.displayName="ReactFlow";function Ki(){const e=ge();return g.useCallback(t=>{const{domNode:n,updateNodeDimensions:o}=e.getState(),r=(Array.isArray(t)?t:[t]).reduce((i,a)=>{const l=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${a}"]`);return l&&i.push({id:a,nodeElement:l,forceUpdate:!0}),i},[]);requestAnimationFrame(()=>o(r))},[])}function Zi(e){return t=>{const[n,o]=g.useState(t),s=g.useCallback(r=>o(i=>e(r,i)),[]);return[n,o,s]}}const Mm=Zi(Vi),Am=Zi(Ih);function wp(){return z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},z.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function vp(){return z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},z.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Sp(){return z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},z.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function _p(){return z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},z.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Ep(){return z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},z.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Xt=({children:e,className:t,...n})=>z.createElement("button",{type:"button",className:ve(["react-flow__controls-button",t]),...n},e);Xt.displayName="ControlButton";const Cp=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Ji=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:r,onZoomOut:i,onFitView:a,onInteractiveChange:l,className:u,children:c,position:d="bottom-left"})=>{const h=ge(),[p,x]=g.useState(!1),{isInteractive:m,minZoomReached:S,maxZoomReached:b}=ce(Cp,ye),{zoomIn:E,zoomOut:A,fitView:w}=ss();if(g.useEffect(()=>{x(!0)},[]),!p)return null;const M=()=>{E(),r==null||r()},k=()=>{A(),i==null||i()},j=()=>{w(s),a==null||a()},V=()=>{h.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l==null||l(!m)};return z.createElement(ai,{className:ve(["react-flow__controls",u]),position:d,style:e,"data-testid":"rf__controls"},t&&z.createElement(z.Fragment,null,z.createElement(Xt,{onClick:M,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b},z.createElement(wp,null)),z.createElement(Xt,{onClick:k,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:S},z.createElement(vp,null))),n&&z.createElement(Xt,{className:"react-flow__controls-fitview",onClick:j,title:"fit view","aria-label":"fit view"},z.createElement(Sp,null)),o&&z.createElement(Xt,{className:"react-flow__controls-interactive",onClick:V,title:"toggle interactivity","aria-label":"toggle interactivity"},m?z.createElement(Ep,null):z.createElement(_p,null)),c)};Ji.displayName="Controls";var Dm=g.memo(Ji),Ve;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ve||(Ve={}));function Np({color:e,dimensions:t,lineWidth:n}){return z.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Ip({color:e,radius:t}){return z.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const kp={[Ve.Dots]:"#91919a",[Ve.Lines]:"#eee",[Ve.Cross]:"#e2e2e2"},Tp={[Ve.Dots]:1,[Ve.Lines]:1,[Ve.Cross]:6},Mp=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Qi({id:e,variant:t=Ve.Dots,gap:n=20,size:o,lineWidth:s=1,offset:r=2,color:i,style:a,className:l}){const u=g.useRef(null),{transform:c,patternId:d}=ce(Mp,ye),h=i||kp[t],p=o||Tp[t],x=t===Ve.Dots,m=t===Ve.Cross,S=Array.isArray(n)?n:[n,n],b=[S[0]*c[2]||1,S[1]*c[2]||1],E=p*c[2],A=m?[E,E]:b,w=x?[E/r,E/r]:[A[0]/r,A[1]/r];return z.createElement("svg",{className:ve(["react-flow__background",l]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},z.createElement("pattern",{id:d+e,x:c[0]%b[0],y:c[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},x?z.createElement(Ip,{color:h,radius:E/r}):z.createElement(Np,{dimensions:A,color:h,lineWidth:s})),z.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}Qi.displayName="Background";var $m=g.memo(Qi);const Ap=ct(Ja)(({theme:e})=>({background:e.palette.card.main,color:e.darkTextPrimary,border:"solid 1px",borderColor:e.palette.primary[200]+75,width:"300px",height:"auto",padding:"10px",boxShadow:"0 2px 14px 0 rgb(32 40 45 / 8%)","&:hover":{borderColor:e.palette.primary.main}})),Dp=ct(({className:e,...t})=>f.jsx(Po,{...t,classes:{popper:e}}))(({theme:e})=>({[`& .${Ho.tooltip}`]:{backgroundColor:e.palette.nodeToolTip.background,color:e.palette.nodeToolTip.color,boxShadow:e.shadows[1]}}));var is={},$p=Ro;Object.defineProperty(is,"__esModule",{value:!0});var ea=is.default=void 0,Rp=$p($o()),jp=f,Vp=(0,Rp.default)((0,jp.jsx)("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.9959.9959 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41l-2.33-2.35zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12-2.44 2.44z"}),"AutoFixHigh");ea=is.default=Vp;function zp(e){return typeof e=="string"}function Lp(e,t,n){return e===void 0||zp(e)?t:Z({},t,{ownerState:Z({},t.ownerState,n)})}function ur(e,t,n=(o,s)=>o===s){return e.length===t.length&&e.every((o,s)=>n(o,t[s]))}const Pp={disableDefaultClasses:!1},Hp=g.createContext(Pp);function as(e){const{disableDefaultClasses:t}=g.useContext(Hp);return n=>t?"":e(n)}function Dt(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{n[o]=e[o]}),n}function Fp(e,t,n){return typeof e=="function"?e(t,n):e}function Op(e){const{rootElementName:t="",componentName:n}=e,[o,s]=g.useState(t.toUpperCase()),r=g.useCallback(i=>{var a;s((a=i==null?void 0:i.tagName)!=null?a:"")},[]);return[o,r]}function dr(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function Bp(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:o,externalForwardedProps:s,className:r}=e;if(!t){const p=gs(n==null?void 0:n.className,r,s==null?void 0:s.className,o==null?void 0:o.className),x=Z({},n==null?void 0:n.style,s==null?void 0:s.style,o==null?void 0:o.style),m=Z({},n,s,o);return p.length>0&&(m.className=p),Object.keys(x).length>0&&(m.style=x),{props:m,internalRef:void 0}}const i=Dt(Z({},s,o)),a=dr(o),l=dr(s),u=t(i),c=gs(u==null?void 0:u.className,n==null?void 0:n.className,r,s==null?void 0:s.className,o==null?void 0:o.className),d=Z({},u==null?void 0:u.style,n==null?void 0:n.style,s==null?void 0:s.style,o==null?void 0:o.style),h=Z({},u,n,l,a);return c.length>0&&(h.className=c),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:u.ref}}const Wp=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function ls(e){var t;const{elementType:n,externalSlotProps:o,ownerState:s,skipResolvingSlotProps:r=!1}=e,i=An(e,Wp),a=r?{}:Fp(o,s),{props:l,internalRef:u}=Bp(Z({},i,{externalSlotProps:a})),c=Qt(u,a==null?void 0:a.ref,(t=e.additionalProps)==null?void 0:t.ref);return Lp(n,Z({},l,{ref:c}),s)}const ta="base";function Xp(e){return`${ta}--${e}`}function Yp(e,t){return`${ta}-${e}-${t}`}function Bn(e,t){const n=Qa[t];return n?Xp(n):Yp(e,t)}function Wn(e,t){const n={};return t.forEach(o=>{n[o]=Bn(e,o)}),n}const na="Tabs";function Up(e){return Bn(na,e)}Wn(na,["root","horizontal","vertical"]);const cs=g.createContext(null);function Gp(e){const t=Array.from(e.keys()).map(n=>{const o=e.get(n);return{key:n,subitem:o}});return t.sort((n,o)=>{const s=n.subitem.ref.current,r=o.subitem.ref.current;return s===null||r===null||s===r?0:s.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(n=>[n.key,n.subitem]))}function oa(){const[e,t]=g.useState(new Map),n=g.useRef(new Set),o=g.useCallback(function(u){n.current.delete(u),t(c=>{const d=new Map(c);return d.delete(u),d})},[]),s=g.useCallback(function(u,c){let d;return typeof u=="function"?d=u(n.current):d=u,n.current.add(d),t(h=>{const p=new Map(h);return p.set(d,c),p}),{id:d,deregister:()=>o(d)}},[o]),r=g.useMemo(()=>Gp(e),[e]),i=g.useCallback(function(u){return Array.from(r.keys()).indexOf(u)},[r]);return{contextValue:g.useMemo(()=>({getItemIndex:i,registerItem:s,totalSubitemCount:e.size}),[i,s,e.size]),subitems:r}}function qp(e,t){const n=g.useContext(cs);if(n===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:o}=n,[s,r]=g.useState(typeof e=="function"?void 0:e);return el(()=>{const{id:i,deregister:a}=o(e,t);return r(i),a},[o,t,e]),{id:s,index:s!==void 0?n.getItemIndex(s):-1,totalItemCount:n.totalSubitemCount}}function Kp(e){const{value:t,defaultValue:n,onChange:o,orientation:s="horizontal",direction:r="ltr",selectionFollowsFocus:i=!1}=e,[a,l]=vl({controlled:t,default:n,name:"Tabs",state:"value"}),u=g.useCallback((S,b)=>{l(b),o==null||o(S,b)},[o,l]),{subitems:c,contextValue:d}=oa(),h=g.useRef(()=>{}),p=g.useCallback(S=>{var b;return(b=c.get(S))==null?void 0:b.id},[c]),x=g.useCallback(S=>h.current(S),[]),m=g.useCallback(S=>{h.current=S},[]);return{contextValue:Z({direction:r,getTabId:x,getTabPanelId:p,onSelected:u,orientation:s,registerTabIdLookup:m,selectionFollowsFocus:i,value:a},d)}}const sa=g.createContext(null);function ra(){const e=g.useContext(sa);if(e==null)throw new Error("No TabsContext provided");return e}function Zp(e){const{value:t,children:n}=e,{direction:o,getItemIndex:s,onSelected:r,orientation:i,registerItem:a,registerTabIdLookup:l,selectionFollowsFocus:u,totalSubitemCount:c,value:d,getTabId:h,getTabPanelId:p}=t,x=g.useMemo(()=>({getItemIndex:s,registerItem:a,totalSubitemCount:c}),[a,s,c]),m=g.useMemo(()=>({direction:o,getTabId:h,getTabPanelId:p,onSelected:r,orientation:i,registerTabIdLookup:l,selectionFollowsFocus:u,value:d}),[o,h,p,r,i,l,u,d]);return f.jsx(cs.Provider,{value:x,children:f.jsx(sa.Provider,{value:m,children:n})})}const Jp=["children","value","defaultValue","orientation","direction","onChange","selectionFollowsFocus","slotProps","slots"],Qp=e=>{const{orientation:t}=e;return jo({root:["root",t]},as(Up))},ia=g.forwardRef(function(t,n){var o;const{children:s,orientation:r="horizontal",direction:i="ltr",slotProps:a={},slots:l={}}=t,u=An(t,Jp),c=Z({},t,{orientation:r,direction:i}),{contextValue:d}=Kp(c),h=Qp(c),p=(o=l.root)!=null?o:"div",x=ls({elementType:p,externalSlotProps:a.root,externalForwardedProps:u,additionalProps:{ref:n},ownerState:c,className:h.root});return f.jsx(p,Z({},x,{children:f.jsx(Zp,{value:d,children:s})}))}),aa="TabsList";function eg(e){return Bn(aa,e)}Wn(aa,["root","horizontal","vertical"]);const la={valueChange:"valueChange"},me={blur:"list:blur",focus:"list:focus",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function tg(e,t,n,o,s,r){if(n.length===0||!o&&n.every((a,l)=>s(a,l)))return-1;let i=e;for(;;){if(!r&&t==="next"&&i===n.length||!r&&t==="previous"&&i===-1)return-1;if(o?!1:s(n[i],i))i+=t==="next"?1:-1,r&&(i=(i+n.length)%n.length);else return i}}function we(e,t,n){var o;const{items:s,isItemDisabled:r,disableListWrap:i,disabledItemsFocusable:a,itemComparer:l,focusManagement:u}=n,c=u==="DOM"?0:-1,d=s.length-1,h=e==null?-1:s.findIndex(b=>l(b,e));let p,x,m=!i;switch(t){case"reset":if(c===-1)return null;p=0,x="next",m=!1;break;case"start":p=0,x="next",m=!1;break;case"end":p=d,x="previous",m=!1;break;default:{const b=h+t;b<0?!m&&h!==-1||Math.abs(t)>1?(p=0,x="next"):(p=d,x="previous"):b>d?!m||Math.abs(t)>1?(p=d,x="previous"):(p=0,x="next"):(p=b,x=t>=0?"next":"previous")}}const S=tg(p,x,s,a,r,m);return S===-1&&e!==null&&!r(e,h)?e:(o=s[S])!=null?o:null}function ng(e,t,n,o){return n==="none"?[]:n==="single"?o(t[0],e)?t:[e]:t.some(s=>o(s,e))?t.filter(s=>!o(s,e)):[...t,e]}function ca(e,t,n){const{itemComparer:o,isItemDisabled:s,selectionMode:r,items:i}=n,{selectedValues:a}=t,l=i.findIndex(c=>o(e,c));if(s(e,l))return t;const u=ng(e,a,r,o);return Z({},t,{selectedValues:u,highlightedValue:e})}function og(e,t,n){const o=t.highlightedValue,{orientation:s,pageSize:r}=n;switch(e){case"Home":return Z({},t,{highlightedValue:we(o,"start",n)});case"End":return Z({},t,{highlightedValue:we(o,"end",n)});case"PageUp":return Z({},t,{highlightedValue:we(o,-r,n)});case"PageDown":return Z({},t,{highlightedValue:we(o,r,n)});case"ArrowUp":if(s!=="vertical")break;return Z({},t,{highlightedValue:we(o,-1,n)});case"ArrowDown":if(s!=="vertical")break;return Z({},t,{highlightedValue:we(o,1,n)});case"ArrowLeft":{if(s==="vertical")break;return Z({},t,{highlightedValue:we(o,s==="horizontal-ltr"?-1:1,n)})}case"ArrowRight":{if(s==="vertical")break;return Z({},t,{highlightedValue:we(o,s==="horizontal-ltr"?1:-1,n)})}case"Enter":case" ":return t.highlightedValue===null?t:ca(t.highlightedValue,t,n)}return t}function sg(e,t){return t.focusManagement==="DOM"?e:Z({},e,{highlightedValue:null})}function rg(e,t,n){var o;const s=(o=n(e))==null?void 0:o.trim().toLowerCase();return!s||s.length===0?!1:s.indexOf(t)===0}function ig(e,t,n){const{items:o,isItemDisabled:s,disabledItemsFocusable:r,getItemAsString:i}=n,a=t.length>1;let l=a?e.highlightedValue:we(e.highlightedValue,1,n);for(let u=0;u<o.length;u+=1){if(!l||!a&&e.highlightedValue===l)return e;if(rg(l,t,i)&&(!s(l,o.indexOf(l))||r))return Z({},e,{highlightedValue:l});l=we(l,1,n)}return e}function ag(e,t,n,o){var s;const{itemComparer:r,focusManagement:i}=o;let a=null;if(n.highlightedValue!=null){var l;a=(l=e.find(d=>r(d,n.highlightedValue)))!=null?l:null}else i==="DOM"&&t.length===0&&(a=we(null,"reset",o));const c=((s=n.selectedValues)!=null?s:[]).filter(d=>e.some(h=>r(h,d)));return Z({},n,{highlightedValue:a,selectedValues:c})}function lg(e,t){return Z({},e,{highlightedValue:we(null,"reset",t)})}function cg(e,t){return Z({},e,{highlightedValue:we(null,"end",t)})}function ug(e,t){return Z({},e,{selectedValues:[],highlightedValue:we(null,"reset",t)})}function ua(e,t){const{type:n,context:o}=t;switch(n){case me.keyDown:return og(t.key,e,o);case me.itemClick:return ca(t.item,e,o);case me.blur:return sg(e,o);case me.tex